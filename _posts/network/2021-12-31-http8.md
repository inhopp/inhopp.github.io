---
title:  "Chapter8. HTTP ν—¤λ” & μΊμ‹" 

categories:
  -  Network
tags:
  - [CS, Network, HTTP]

toc: true
toc_sticky: true

date: 2021-12-31
last_modified_at: 2021-12-31
---

μΈν”„λ°μ— μλ” κΉ€μν•λ‹μ **[λ¨λ“  κ°λ°μλ¥Ό μ„ν• HTTPμ›Ή κΈ°λ³Έ μ§€μ‹](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)** κ°•μλ¥Ό λ“£κ³  μ •λ¦¬ν• λ‚΄μ©μ…λ‹λ‹¤.<br>
μ¤‘κ°„μ— λ“±μ¥ν•λ” ppt λ‚΄μ©λ“¤μ€ λ¨λ‘ κ°•μμλ£λ¥Ό μΊ΅μ²ν• κ²ƒμ…λ‹λ‹¤.
{: .notice--warning}

<br>

# βοΈ μΊμ‹

ν• μ‚¬μ©μκ°€ κ°™μ€ νμ΄μ§€λ¥Ό λ°λ³µμ μΌλ΅ μ”μ²­ν•λ‹¤κ³  κ°€μ •ν•΄λ³΄μ. ν΄λΌμ΄μ–ΈνΈλ” λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ λ³€κ²½λμ§€ μ•μ€ λ°μ΄ν„°λ¥Ό κ³„μ† λ‹¤μ΄λ΅λ“ λ°›μ•„μ•Ό ν•λ‹¤. μ΄λ ‡κ² λλ©΄ λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λλ ¤μ§ λΏλ§ μ•„λ‹λΌ λΉ„μ‹Ό μΈν„°λ„· λ„¤νΈμ›ν¬ λΉ„μ©μ„ μ§€λ¶ν•΄μ•Ό ν•λ‹¤. **<span style="color:#bb90e2">λ°λ³µμ μΌλ΅ μ‚¬μ©ν•λ” λ°μ΄ν„°λ“¤μ„ μ¬ν™μ© ν•  μ μλ” λ°©λ²•μ΄ μ—†μ„κΉ?</span>** μ΄λ• λ“±μ¥ν•λ” κ°λ…μ΄ λ°”λ΅ μΊμ‹β­ μ΄λ‹¤. μλ¥Ό λ“¤μ–΄ λ„κµ¬λ‚ λ’¤λ΅κ°€κΈ° λ²„νΌμ„ λλ €μ„ λ• νμ΄μ§€κ°€ λΉ λ¥΄κ² λ¨λ” κ²½ν—μ„ ν–μ„ κ²ƒμ΄λ‹¤. μ΄λ° κ²ƒλ“¤μ΄ μ „λ¶€ μΊμ‹λ¥Ό μ μ©ν• κ²°κ³Όμ΄λ‹¤.

## μΊμ‹ μ‘λ™ λ°©μ‹

![ch8 1](https://user-images.githubusercontent.com/96368476/147810422-10ca38fa-abd4-4c83-8eec-b2c83ff06264.png){: width="60%" height="70%"}

- ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• λ°μ΄ν„°μ— μΊμ‹λ¥Ό μ μ©ν•  κ²½μ° μ‘λ‹µ λ©”μ‹μ§€μ— **cache-control ν—¤λ”κ°€ μ¶”κ°€** λλ‹¤.

<br>

![ch8 2](https://user-images.githubusercontent.com/96368476/147810475-c89bf919-2fe5-414e-a0b7-7e7c5095d6eb.png){: width="60%" height="70%"}

- μΊμ‹ μ μ–΄ λ©”μ‹μ§€λ¥Ό λ°›μ€ ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µ κ²°κ³Όλ¥Ό μΊμ‹ μ €μ¥μ†μ— μ €μ¥ν•λ‹¤.

<br>

![ch8 3](https://user-images.githubusercontent.com/96368476/147810479-96441c94-f6f3-4e51-ac7b-7b5e063221f3.png){: width="60%" height="70%"}

- μ΄ν›„ μ”μ²­μ— λ€ν•΄μ„λ” μΊμ‹ μ €μ¥μ†λ¥Ό λ¨Όμ € λ’¤μ§€κ³  λ°μ΄ν„°κ°€ μ ν¨ν•λ©΄ λ°”λ΅ μ‚¬μ©ν•λ‹¤.
- **μ„λ²„μ™€ λ„¤νΈμ›ν¬ μ—°κ²°λ„ ν•„μ” μ—†λ‹¤.**

<br>

![ch8 4](https://user-images.githubusercontent.com/96368476/147810480-3ec12301-0964-44fc-a751-d6c6989a1cf6.png){: width="60%" height="70%"}

- λ§μ•½ μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•λ©΄, μ„λ²„λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ΅°νν•κ³  μΊμ‹λ¥Ό κ°±μ‹ ν•λ‹¤.
- μ΄λ• λ‹¤μ‹ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•λ‹¤.


<br>



# βοΈ μΊμ‹ κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­

μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄μ„ μ„λ²„μ— λ‹¤μ‹ λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” κ²½μ°λ¥Ό μƒκ°ν•΄λ³΄μ.
- μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•¨ **(μΊμ‹ λ°μ΄ν„°μ™€ λ‹¤λ¦„)**
- μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•μ **(μΊμ‹ λ°μ΄ν„°μ™€ κ°™μ)**

λ§μ•½ μ„λ²„μ λ°μ΄ν„°κ°€ μΊμ‹ λ°μ΄ν„°μ™€ λ™μΌν•λ‹¤λ©΄ κµ³μ΄ κ°™μ€ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ λ‹¤μ΄λ°›μ„ ν•„μ”κ°€ μμ„κΉ? μ΄λ° μƒν™©μ—μ„ μΊμ‹κΉμ§€ μ¬ν™μ©ν•΄λ²„λ¦¬λ” μ§€λ…ν• λ°©λ²•μ΄ μ΅΄μ¬ν•λ‹¤.

 
<br>


## Last-Modified & If-Modified-Since

![ch8 5](https://user-images.githubusercontent.com/96368476/147811506-0a7d7476-60d7-42e3-9c63-a9787aa204cd.png){: width="60%" height="70%"}

- ν΄λΌμ΄μ–ΈνΈμ μ²« μ”μ²­ μ‘λ‹µμ— **κ²€μ¦ ν—¤λ” Last-Modified(μµμΆ… μμ • μΌμ‹)** μ¶”κ°€
- last-modifeid λ°μ΄ν„°λ¥Ό μΊμ‹μ™€ ν•¨κ» μ €μ¥μ†μ— μ €μ¥

<br>

![ch8 6](https://user-images.githubusercontent.com/96368476/147825075-4f4a93d9-8407-4e87-b2a3-202e7257824e.png){: width="60%" height="70%"}

- μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν• μ΄ν›„ λ°μ΄ν„°λ¥Ό μ”μ²­ν•  μ‹ λ°μ΄ν„°κ°€ λ³€κ²½λμ—λ”μ§€ μ„λ²„μ— λ¬Όμ–΄λ΄„
- μ”μ²­ λ©”μ‹μ§€μ— **μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ” If-Modified-Sicne(μ΄λ• μ΄ν›„λ΅ λ°”λ€μ—μ–΄?)** μ¶”κ°€


<br>

![ch8 7](https://user-images.githubusercontent.com/96368476/147825081-11e131cc-a3e2-4c2a-ba27-69e5dce6f66f.png){: width="60%" height="70%"}

- **λ°μ΄ν„° λ³€κ²½**
  - 200 OK (μ‘, λ°”λ€)
  - λ¨λ“  λ°μ΄ν„° μ „μ†΅ (BODY ν¬ν•¨)


- **λ°μ΄ν„° λ―Έλ³€κ²½**
  - 304 Not Modified (μ•„λ‹, μ•λ°”λ€)
  - ν—¤λ” λ°μ΄ν„°λ§ μ „μ†΅ (BODY λ―Έν¬ν•¨)
  - ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ μ‘λ‹µ ν—¤λ” μ •λ³΄λ΅ μΊμ‹ λ©”νƒ€ μ •λ³΄ κ°±μ‹ 
  - μΊμ‹ λ°μ΄ν„° μ¬ν™μ©

- κ²°κ³Όμ μΌλ΅ μ”μ²­&μ‘λ‹µ λ„¤νΈμ›ν¬κ°€ λ°μƒν•μ§€λ§ ν—¤λ” μ •λ³΄λ§ λ‹¤μ΄λ΅λ“ν•λ―€λ΅ λ§¤μ° ν¨μ¨μ μ΄λ‹¤.


<br>


## ETag & If-None-Match

**Last-Modified, If-Modified-Since λ‹¨μ **<br>
- 1μ΄ λ―Έλ§ λ‹¨μ„ μΊμ‹ μ΅°μ •μ΄ λ¶κ°€λ¥
- λ‚ μ§ κΈ°λ°μ λ΅μ§ μ‚¬μ©
- λ‚ μ§λ” λ‹¤λ¥΄μ§€λ§ κ°™μ€ λ°μ΄ν„°μΈ κ²½μ° ( ex. A -> B  μμ •, λ‹¤μ‹ B -> A μμ •)
- μ„λ²„μ—μ„ λ³„λ„μ μΊμ‹ λ΅μ§μ„ κ΄€λ¦¬ν•κ³  μ‹¶μ€ κ²½μ°
  - ex) μ¤νμ΄μ¤λ‚ μ£Όμ„μ€ λ³€κ²½λμ–΄λ„ μΊμ‹λ¥Ό μ μ§€ν•κ³  μ‹¶μ€ κ²½μ°


<br>


**ETag λ“±μ¥** π²<br>

![ch8 9](https://user-images.githubusercontent.com/96368476/147829187-5936c9ce-e8e6-4534-ba21-7c311cac68d2.png){: width="60%" height="70%"}
<br>
![ch8 10](https://user-images.githubusercontent.com/96368476/147829188-f85463e7-41b3-4649-a744-d716ca0709c5.png){: width="60%" height="70%"}
<br>

- ETag (Entity Tag)
- μΊμ‹μ© λ°μ΄ν„°μ— μ„μμ κ³ μ ν• λ²„μ „ μ΄λ¦„μ„ λ‹¬μ•„λ‘  (μ‚¬μ©μ μ§€μ •, Hashκ°’)
  - ex) ETag: "v.1.0", ETag: "a2jiodwjekjl3"
- λ°μ΄ν„°κ°€ λ³€κ²½λλ©΄ μ΄λ¦„ λ°”λ€ (Hashκ°’ λ‹¬λΌμ§)
- **<span style="color:#bb90e2">μ§„μ§ λ‹¨μν•κ² ETagλ§ λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ κ°±μ‹ </span>**




<br>


# βοΈ μΊμ‹ μ μ–΄ ν—¤λ”
- Cache-Control: μΊμ‹ μ μ–΄
- Pragma: μΊμ‹ μ μ–΄ (HTTPμ΄μ „ λ²„μ „ ν•μ„ νΈν™)
- Expires μΊμ‹ μ ν¨ κΈ°κ°„ (HTTPμ΄μ „ λ²„μ „ ν•μ„ νΈν™)

<br>


**Cache-Control**<br>
- Cache-Control: max-age
  - μΊμ‹ μ ν¨ μ‹κ°„ (μ΄ λ‹¨μ„)
- Cache-Control: no-cache
  - λ°μ΄ν„° μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ Origin μ„λ²„μ— κ²€μ¦ν•΄λΌ <span style="color:red">(μ΄λ¦„ μ£Όμ!)</span>
- Cache-Control: no-store
  - λ°μ΄ν„°μ— λ―Όκ°ν• μ •λ³΄κ°€ μμΌλ―€λ΅ μ €μ¥ν•λ©΄ μ•λ¨(λ©”λ¨λ¦¬μ—μ„ μ‚¬μ©ν•κ³  μµλ€ν• λΉ¨λ¦¬ μ‚­μ )

<br>

**Pragma**<br>
- no-cache κΈ°λ¥
- HTTP 1.0 ν•μ„ νΈν™

<br>

**Expires**<br>
- μΊμ‹ λ§λ£μΌ μ •ν™•ν• λ‚ μ§λ΅ μ§€μ •
  - ex) expires: Mon, 01 Jan 1990 00:00:00 GMT
- HTTP 1.0 λ¶€ν„° μ‚¬μ©
- cache-Control: max-ageμ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ Expiresλ” λ¬΄μ‹
- cache-Control: max-age μ‚¬μ© κ¶μ¥



<br>



# βοΈ ν”„λ΅μ‹ μΊμ‹

μ°λ¦¬κ°€ youtubeλ¥Ό λ³Ό λ• λ¨λ“  μ”μ²­μ„ λ―Έκµ­μ— μλ” μ› μ„λ²„μ— λ³΄λ‚΄μ•Ό ν• κΉ? λ™μμƒμ κ²½μ° νΉν λ°μ΄ν„° λ³€κ²½μ΄ μ μ„ ν…λ°, μΊμ‹μ κ°λ…μ„ μ΄μ©ν•λ©΄ λ³΄λ‹¤ ν¨μ¨μ μΈ λ„¤νΈμ›ν¬ ν†µμ‹ μ΄ κ°€λ¥ν•μ§€ μ•μ„κΉ? 

<br>

![ch8 11](https://user-images.githubusercontent.com/96368476/147830411-3d44faff-b220-4b8c-9c77-ffb243f4dcb6.png){: width="60%" height="70%"}

κ·Έλ¦Όκ³Ό κ°™μ΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ§€λ¦¬μ μΌλ΅ κ°€κΉμ΄ μΊμ‹ μ„λ²„λ¥Ό λ‘λ©΄ ν¨μ¨μ μΈ ν†µμ‹ μ΄ κ°€λ¥ν•λ‹¤. μ΄λ¬ν• μ¤‘κ°„ μ„λ²„λ¥Ό **ν”„λ΅μ‹ μΊμ‹ μ„λ²„**λΌ ν•λ‹¤. 

- Cache-Control: public
  - μ‘λ‹µμ΄ public μΊμ‹μ— μ €μ¥λμ–΄λ„ λ¨
- Cache-Control: private
  - μ‘λ‹µμ΄ ν•΄λ‹Ή μ‚¬μ©μ λ§μ„ μ„ν• λ°μ΄ν„°μ„. private μΊμ‹μ—λ§ μ €μ¥(κΈ°λ³Έκ°’)
- Cache-Control: s-maxage
  - ν”„λ΅μ‹ μΊμ‹μ—λ§ μ μ©λλ” max-age
- Age: 60
  - origin μ„λ²„μ—μ„ μ‘λ‹µ ν›„ ν”„λ΅μ‹ μΊμ‹ λ‚΄μ— λ¨Έλ¬Έ μ‹κ°„ (μ΄ λ‹¨μ„)


<br>



# βοΈ μΊμ‹ λ¬΄ν¨ν™”

μ„λ²„κ°€ μΊμ‹ μ§€μ •μ„ ν•μ§€ μ•μ•„λ„ μ›Ή λΈλΌμ°μ €κ°€ μ„μλ΅ μΊμ‹ ν•λ” κ²½μ°κ°€ μΆ…μΆ… μλ‹¤. "μ΄κ±΄ μ§„μ§ μΊμ‹ ν•λ©΄ μ•λΌ"(ex. ν†µμ¥ μ”κ³  λ“±λ“±..) ν•  λ• μ“°λ” ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™” μ‘λ‹µμ΄ μ΅΄μ¬ν•λ‹¤.<br>

μ „λ¶€ 
- **Cache-Control: no-cache, no-store, must-revalidate**
- **Pragma: no-cache (HTTPμ΄μ „ λ²„μ „ ν•μ„ νΈν™)**


<br>


**Cache-Control: no-cache**<br>
- λ°μ΄ν„° μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ Origin μ„λ²„μ— κ²€μ¦ <span style="color:red">(μ΄λ¦„ μ£Όμ!)</span>

<br>

**Cache-Control: no-store**<br>
- λ°μ΄ν„°μ— λ―Όκ°ν• μ •λ³΄κ°€ μμΌλ―€λ΅ μ €μ¥ν•λ©΄ μ•λ¨(λ©”λ¨λ¦¬μ—μ„ μ‚¬μ©ν•κ³  μµλ€ν• λΉ¨λ¦¬ μ‚­μ )

<br>

**Cache-Control: must-revalidate**<br>
- μΊμ‹ λ§λ£ ν›„ μµμ΄ μ΅°νμ‹ μ› μ„λ²„μ— κ²€μ¦
- μ› μ„λ²„μ— μ ‘κ·Ό μ‹¤ν¨μ‹ λ°λ“μ‹ μ¤λ¥ λ°μƒ - **504(Gateway Timeout)**
- μΊμ‹ μ ν¨ μ‹κ°„μ΄λΌλ©΄ μΊμ‹λ¥Ό μ‚¬μ©


<br>

## No-Cache vs Must-Revalidate

**No-Cache**<br>

![ch8 12](https://user-images.githubusercontent.com/96368476/147830414-d6ad53b5-81f8-4e3f-8ea5-fa348191239e.png){: width="60%" height="70%"}

- ν΄λΌμ΄μ–ΈνΈκ°€ μΊμ‹ μ„λ²„μ— μ”μ²­μ‹ λ¬΄μ΅°κ±΄ μ› μ„λ²„λ΅ λ„κΉ€
- μ› μ„λ²„κ°€ OK ν•λ©΄ μΊμ‹ μ‚¬μ©


![ch8 13](https://user-images.githubusercontent.com/96368476/147830417-0a72336d-44bd-4b99-b4b4-d6a0323c8a0f.png){: width="60%" height="70%"}

- μ› μ„λ²„μ— μ ‘κ·Ό μ‹¤ν¨μ‹ μΊμ‹ μ„λ²„ μ¬λ‰μΌλ΅ OK κ°€λ¥
- **<span style="color:red">μ¤λ¥ λ³΄λ‹¤λ” μ΄μ „ λ°μ΄ν„°λΌλ„ λ³΄μ—¬μ£Όμ</span>**


<br>


**Must-Revalidate**<br>

![ch8 14](https://user-images.githubusercontent.com/96368476/147830418-3492461d-2c9e-430c-afb6-0f62e26549a7.png){: width="60%" height="70%"}

- **<span style="color:red">μ› μ„λ²„μ— μ ‘κ·Ό μ‹¤ν¨μ‹ λ¬΄μ΅°κ±΄ μ¤λ¥ λ°μƒ</span>**




<br>
<br>



[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}