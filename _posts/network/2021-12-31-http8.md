---
title:  "Chapter7. HTTP 헤더 & 캐시" 

categories:
  -  Network
tags:
  - [CS, Network, HTTP]

toc: true
toc_sticky: true

date: 2021-12-31
last_modified_at: 2021-12-31
---

인프런에 있는 김영한님의 **[모든 개발자를 위한 HTTP웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)** 강의를 듣고 정리한 내용입니다.<br>
중간에 등장하는 ppt 내용들은 모두 강의자료를 캡처한 것입니다.
{: .notice--warning}

<br>

# ✈️ 캐시

한 사용자가 같은 페이지를 반복적으로 요청한다고 가정해보자. 클라이언트는 네트워크를 통해 변경되지 않은 데이터를 계속 다운로드 받아야 한다. 이렇게 되면 브라우저 로딩 속도가 느려질 뿐만 아니라 비싼 인터넷 네트워크 비용을 지불해야 한다. **<span style="color:#bb90e2">반복적으로 사용하는 데이터들을 재활용 할 수 있는 방법이 없을까?</span>** 이때 등장하는 개념이 바로 캐시⭐ 이다. 예를 들어 누구나 뒤로가기 버튼을 눌렀을 때 페이지가 빠르게 뜨는 경험을 했을 것이다. 이런 것들이 전부 캐시를 적용한 결과이다.

## 캐시 작동 방식

![ch8 1](https://user-images.githubusercontent.com/96368476/147810422-10ca38fa-abd4-4c83-8eec-b2c83ff06264.png){: width="60%" height="70%"}

- 클라이언트가 요청한 데이터에 캐시를 적용할 경우 응답 메시지에 **cache-control 헤더가 추가** 된다.

<br>

![ch8 2](https://user-images.githubusercontent.com/96368476/147810475-c89bf919-2fe5-414e-a0b7-7e7c5095d6eb.png){: width="60%" height="70%"}

- 캐시 제어 메시지를 받은 클라이언트는 응답 결과를 캐시 저장소에 저장한다.

<br>

![ch8 3](https://user-images.githubusercontent.com/96368476/147810479-96441c94-f6f3-4e51-ac7b-7b5e063221f3.png){: width="60%" height="70%"}

- 이후 요청에 대해서는 캐시 저장소를 먼저 뒤지고 데이터가 유효하면 바로 사용한다.
- **서버와 네트워크 연결도 필요 없다.**

<br>

![ch8 4](https://user-images.githubusercontent.com/96368476/147810480-3ec12301-0964-44fc-a751-d6c6989a1cf6.png){: width="60%" height="70%"}

- 만약 캐시 유효 시간이 초과하면, 서버를 통해 데이터를 다시 조회하고 캐시를 갱신한다.
- 이때 다시 네트워크 다운로드가 발생한다.


<br>



# ✈️ 캐시 검증 헤더와 조건부 요청

캐시 유효 시간이 초과해서 서버에 다시 데이터를 요청하는 경우를 생각해보자.
- 서버에서 기존 데이터를 변경함 **(캐시 데이터와 다름)**
- 서버에서 기존 데이터를 변경하지 않음 **(캐시 데이터와 같음)**

만약 서버의 데이터가 캐시 데이터와 동일하다면 굳이 같은 데이터를 다시 다운받을 필요가 있을까? 이런 상황에서 캐시까지 재활용해버리는 지독한 방법이 존재한다.

 
<br>


## Last-Modified & If-Modified-Since

![ch8 5](https://user-images.githubusercontent.com/96368476/147811506-0a7d7476-60d7-42e3-9c63-a9787aa204cd.png){: width="60%" height="70%"}

- 클라이언트의 첫 요청 응답에 **Last-Modified** 헤더 추가
- last-modifeid 데이터를 캐시와 함께 저장소에 저장


[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}