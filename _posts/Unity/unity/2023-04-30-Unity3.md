---
title:  "[ê·¸ë˜í”½ìŠ¤ ìµœì í™”] Culling" 

categories:
  -  Unity
tags:
  - [Optimization]

toc: true
toc_sticky: true

date: 2023-04-30
last_modified_at: 2023-04-30
---


**Main Reference: <br>- [ìœ ë‹ˆí‹° ê·¸ë˜í”½ìŠ¤ ìµœì í™”](https://product.kyobobook.co.kr/detail/S000001888125)<br>[Unity Korea](https://www.youtube.com/watch?v=O0qliGO7Oes)**
{: .notice--warning}

<br>

# ğŸ³ Frustum Culling

![VisualCameraFrustum](https://user-images.githubusercontent.com/96368476/235331698-d31a1b44-9f0e-4a3f-b379-3af325815b94.png){: width="60%" height="70%"}

ì•ì„œ ë°°ìš´ Draw Callì„ ì¤„ì´ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë‚­ë¹„ë˜ëŠ” draw callì„ ì¤„ì´ëŠ” ê²ƒì´ë‹¤. Cullingì´ë€ ì¹´ë©”ë¼ ë·° ë°–ì— ì¡´ì¬í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë‚˜, ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ì— ê°€ë ¤ì ¸ ë Œë”ë§í•  í•„ìš”ê°€ ì—†ëŠ” ì˜¤ë¸Œì íŠ¸ë“¤ì„ ê±¸ëŸ¬ë‚´ëŠ” ì‘ì—…ì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” Perstpective Projectionì„ ì‚¬ìš©í–ˆì„ ë•Œ, ì¹´ë©”ë¼ë¥¼ í†µí•´ í™”ë©´ì— ë‚˜ì˜¤ëŠ” ì˜ì—­ì€ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì€ Frustum(ì‚¬ê°ë¿”ì˜ ì ˆë‘ì²´) ëª¨ì–‘ì´ë‹¤. 

<br>

| Free Look View | Quater View | Top View |
|:-:|:-:|:-:|
|![1](https://user-images.githubusercontent.com/96368476/235332506-df7eee1d-c82d-4d4e-9062-c39a711a4972.jpg)| ![158551_164211_5942](https://user-images.githubusercontent.com/96368476/235332504-8ca9ae3a-3a8b-4afd-848d-4072b7b32fc5.jpg) | ![maxresdefault](https://user-images.githubusercontent.com/96368476/235332505-1bf36d42-9940-4e37-a4c9-858b9b8b26cd.jpg) |

Quater viewë‚˜ Top view ë°©ì‹ì˜ ê²½ìš° view frustumì˜ í¬ê¸°ê°€ ì»¤ì ¸ë„ ë Œë”ë§í•  ì˜¤ë¸Œì íŠ¸ì˜ ìˆ˜ê°€ í¬ê²Œ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Free Look view ë°©ì‹ì€ near, far ê°’ì— ë”°ë¼ í˜¸ì¶œë˜ëŠ” draw callì˜ ê°¯ìˆ˜ê°€ í¬ê²Œ ë‹¬ë¼ì§„ë‹¤. ë”°ë¼ì„œ Far ê°’ì„ ì ì ˆí•˜ê²Œ ì¡°ì ˆí•´ì£¼ë©° ì„±ëŠ¥ ìµœì í™”ë¥¼ í•´ì¤˜ì•¼ í•œë‹¤.

<br>

| Far value :  up | Far value : down |
|:-:|:-:|
|![2](https://user-images.githubusercontent.com/96368476/235332766-911ead53-032c-4e1e-9af2-1f73a9a4a700.png)| ![3](https://user-images.githubusercontent.com/96368476/235332769-273dc25c-346e-4aa1-92ce-0887e37a47f2.png) |  

ìœ„ì™€ ê°™ì´ Far ê°’ì„ ì¡°ì ˆí•¨ì— ë”°ë¼ Draw callì˜ ê°¯ìˆ˜ê°€ 2064ì—ì„œ 1374ë¡œ ì¤„ì–´ë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ Farê°’ì„ ì¤„ì´ê²Œ ë˜ë©´ ë³´ì—¬ì•¼ í•  ì˜¤ë¸Œì íŠ¸ë“¤ì´ ë³´ì´ì§€ ì•Šì•„ ì–´ìƒ‰í•œ ì”¬ì´ ë Œë”ë§ ë˜ì–´ë²„ë¦°ë‹¤. ì´ëŸ° ë¬¸ì œì ì€ Fog Effectë¥¼ ì ìš©í•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤! <br>

![4](https://user-images.githubusercontent.com/96368476/235332770-90f2bcbe-9e52-4c34-bc96-4f1702894146.png){: width="60%" height="70%"}


<br>


## Spatial Partition

| Quad Tree | Octree |
|:-:|:-:|
|![Q](https://user-images.githubusercontent.com/96368476/235331690-f847a880-1369-4ab3-8613-62cc9d469f66.png)| ![O](https://user-images.githubusercontent.com/96368476/235331692-2ee36e7e-f080-4a7d-9654-4e68daf5972f.png) |  

ì¢€ ë” ë“¤ì–´ê°€ì„œ, ì˜¤ë¸Œì íŠ¸ê°€ ì¹´ë©”ë¼ ë·°(view frustum)ì— í¬í•¨ë˜ëŠ”ì§€ ì–´ë–»ê²Œ íŒë‹¨í•  ìˆ˜ ìˆì„ê¹Œ? íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ì´ìš©í•´ ê³µê°„ì„ ë¶„í• í•˜ê³ (spatial partition), ì”¬ì˜ íŠ¹ì • ì˜ì—­ì´ ì¹´ë©”ë¼ ë·°ì™€ ê²¹ì¹˜ëŠ”ì§€ ì—¬ë¶€ë¡œ íŒë‹¨í•œë‹¤(bounding box ê¸°ì¤€). 2Dì˜ ê²½ìš° ì”¬ì„ 4ë“±ë¶„(Quad-tree) í•´ê°€ë©° íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ , 3Dì˜ ê²½ìš° 8ë“±ë¶„(Octree)ì„ í•´ê°€ë©° íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤.

<br>

![5](https://user-images.githubusercontent.com/96368476/235331695-0e997ad2-424b-44c3-80bd-08e2c216911b.png){: width="40%" height="50%"}



<br>



# ğŸ³ Occlusion Culling

| Occlusion Culling | Setting |
|:-:|:-:|
|![culling](https://user-images.githubusercontent.com/96368476/235337686-91414e67-d650-4497-a6a5-4bcc60585af5.jpeg)| ![S](https://user-images.githubusercontent.com/96368476/235337980-f8f22018-ea08-4cd0-a625-67d541f642b0.png) | 

Occlusion Cullingì€ ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ ë’¤ì— ê°€ë ¤ì§„ ì˜¤ë¸Œì íŠ¸ë“¤ì„ ê±¸ëŸ¬ë‚´ëŠ” ê¸°ë²•ì´ë‹¤. ì£¼ë¡œ ì¢ì€ ê³µê°„ì— ë§ì€ ì˜¤ë¸Œì íŠ¸ë“¤ì´ ì¡´ì¬í•˜ëŠ” ì‹¤ë‚´ ì”¬ì—ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤. Cullingì— ì‚¬ìš©ë˜ëŠ” íƒ€ì…ì€ ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ë¦¬ëŠ” ì• (Occluder), ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ì— ì˜í•´ ê°€ë ¤ì§€ëŠ” ì• (Occludee) ë‘ ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤. OccluderëŠ” ì£¼ë¡œ í¬ê¸°ê°€ í¬ê³  ì›€ì§ì´ì§€ ì•ŠëŠ” static typeì— ì ìš©í•˜ê³ , OccludeeëŠ” static, dynamic ëª¨ë‘ ì ìš© ê°€ëŠ¥í•˜ë‹¤. ì„¸íŒ…ì—ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ì˜ ê°’ë“¤ì´ ì¡´ì¬í•˜ëŠ”ë° ì´ëŠ” ì •í•´ì§„ ìµœì ê°’ì´ ì—†ê³ , ì”¬ë§ˆë‹¤ ë‹¤ë¥¸ ë§¤ì§ë„˜ë²„ì´ë‹¤. ë˜í•œ ë¬¸ì²˜ëŸ¼ ì—´ë¦´ ë–„, ë‹«í ë–„ cullingì´ ë°”ë€ŒëŠ” ê²½ìš° ì‚¬ìš©í•˜ëŠ” Portalì´ë€ componentê°€ ì¡´ì¬í•˜ê³ , ì—¬ëŸ¬ ê°œì˜ ì¹´ë©”ë¼ë¥¼ ì‚¬ìš©í•  ë•Œ ì“°ëŠ” culling mask componentë„ ì¡´ì¬í•œë‹¤.



<br>



# ğŸ³ Level of Detail (LOD)

![LODGroup-width](https://user-images.githubusercontent.com/96368476/235338163-a62cdc0d-afc3-45ab-a6f8-9f603bc7cab4.png){: width="60%" height="70%"}

LODë¥¼ ì´ìš©í•´ì„œë„ Culling ì‘ì—…ì„ ìˆ˜í–‰í•´ì¤„ ìˆ˜ ìˆë‹¤. Frustum Cullingì˜ ê²½ìš° Far plane ê²½ê³„ê°’ì— ì˜í•´ ë Œë”ë§ì´ on/off ë˜ì§€ë§Œ, LOD Groupì„ ì´ìš©í•œ cullingì˜ ê²½ìš° í™”ë©´ í”½ì…€ì˜ ëª‡ í¼ì„¼íŠ¸ë¥¼ ì°¨ì§€í•˜ëŠ”ì§€ì— ë”°ë¼ culiing ì—¬ë¶€ë¥¼ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ê±°ë¦¬ê°€ ì•„ì£¼ ë©€ì§€ëŠ” ì•Šì§€ë§Œ í¬ê¸°ê°€ ì‘ì•„ ìˆìœ¼ë‚˜ ì—†ìœ¼ë‚˜ í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë“¤ì„ ë Œë”ë§ í•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ draw callì„ ìµœì í™”í•˜ëŠ” ë°©ì‹ì´ë‹¤.



<br>
<br>


[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}