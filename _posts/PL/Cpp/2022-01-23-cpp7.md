---
title:  "[ë”°ë°°ì”¨++]Chapter6-2. ë°°ì—´, í¬ì¸í„°, ì°¸ì¡°"

categories:
  -  Cpp
tags:
  - [Programming]

toc: true
toc_sticky: true

date: 2022-01-23
last_modified_at: 2022-01-23
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ë‹˜ì˜ **[í™ì •ëª¨ì˜ ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++](https://www.inflearn.com/course/following-c-plus#)** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.<br>
**[ê³µë¶€í•˜ëŠ” ì‹ë¹µë§˜](https://ansohxxn.github.io/categories/cpp)** ë‹˜ì˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.
{: .notice--warning}

<br>

# ğŸš† ë©”ëª¨ë¦¬ ë™ì  í• ë‹¹


## íŠ¹ì§•

- `{ }` ë²”ìœ„ì— ìƒê´€ ì—†ì´ í•„ìš”í•  ë•Œ í• ë‹¹ë°›ê³  ì‚¬ìš© í›„ ë°˜ë‚©
- ë©”ëª¨ë¦¬ í¬ê¸°ë¥¼ ëŸ°íƒ€ì„ì— ê²°ì • ê°€ëŠ¥
- OSë¥¼ ê±°ì³ì•¼ í•´ì„œ ì¡°ê¸ˆ ëŠë¦¼
  - ì •ì  í• ë‹¹ â†’ stack ë©”ëª¨ë¦¬ í• ë‹¹ (ìš©ëŸ‰ ì‘ìŒ)
  - ë™ì  í• ë‹¹ â†’ heap ë©”ëª¨ë¦¬ í• ë‹¹ (ìš©ëŸ‰ í¼)
  - í° ë©”ëª¨ë¦¬ëŠ” ì •ì  í• ë‹¹(stack memory) ëª»ë°›ìŒ
- í• ë‹¹ë°›ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ í¬ì¸í„°ë¡œ ë°›ìŒ
- ë°˜ë‚© ê¹Œë¨¹ìœ¼ë©´ memory leak (ëˆ„ìˆ˜ ë°œìƒ)


<br>


## í• ë‹¹ - new / ë°˜ë‚© - delete

``` cpp
int* ptr = new int;
*ptr = 7;
int* ptr2 = ptr;

delete ptr;
ptr = nullptr;

cout << ptr << endl;	// null
cout << ptr2 << endl;	// ì›ë˜ ptr ì£¼ì†Œ
cout << *ptr2 << endl;	// ì“°ë ˆê¸° ê°’
```

- ë©”ëª¨ë¦¬ í• ë‹¹ì‹œ(new ì„ ì–¸) í™ ë©”ëª¨ë¦¬ í¬ê¸°ë¥¼ ê¸°ì–µí•´ ë‘ 
- deleteì‹œ í•´ë‹¹ ì£¼ì†Œì— ê¸°ì–µí•´ë‘” ë©”ëª¨ë¦¬ í¬ê¸°ë§Œí¼ ë°˜ë‚©
- delete í•´ë„ í¬ì¸í„° ì£¼ì†ŒëŠ” ê·¸ëŒ€ë¡œ ì¡´ì¬ (ì“°ë ˆê¸° ê°’ ë“¤ì–´ìˆìŒ)
- ë”°ë¼ì„œ delete í›„ì—ëŠ” ptr = nullptr í•´ì£¼ëŠ”ê²Œ ì¢‹ìŒ
- ê°„ì ‘ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„°ë“¤ ì¼ì¼íˆ ì´ˆê¸°í™” í•˜ê¸° í˜ë“¬... â†’ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ê°€ í•´ê²°í•´ì¤Œ
- **<span style="color:red">ì£¼ì˜) delete í•˜ê¸° ì „ì— nullptrì¸ì§€ ì²´í¬í•˜ëŠ”ê²Œ ì¢‹ìŒ</span>**
  - nullptrì„ deleteí•˜ëŠ” ê²½ìš° 'do nothing' ì´ì§€ë§Œ í¼í¬ë¨¼ìŠ¤ì— ë¯¼ê°í•˜ ê²½ìš° ì´ì•¼ê¸°ê°€ ë‹¤ë¥´ë‹¤ê³  í•¨
  - nullptr ì²´í¬ ì—†ì´ deleteë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ì°¨ë¼ë¦¬ ìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ë¥¼ ì“°ëŠ” ê²ƒì´ 'í˜„ëŒ€ì ' ìŠ¤íƒ€ì¼


<br>


## ë™ì  í• ë‹¹ ë°°ì—´

``` cpp
int length;
cin >> length;

int* array = new int[length]; // OK ì“°ë ˆê¸° ê°’ ë“¤ì–´ìˆìŒ
int* array = new int[length](); // OK 0ìœ¼ë¡œ ì´ˆê¸°í™”
int* array = new int[length](1, 2, 3, 4, 5); // Error : ì»´íŒŒì¼ íƒ€ì„ì— ì´ˆê¸°í™” ì•ˆí•˜ë ¤ í•¨


delete[] array;
```

- ë™ì  ë©”ëª¨ë¦¬ëŠ” ì´ˆê¸°í™” ì‚´ì§ ê¹Œë‹¤ë¡œì›€
- ì •ì  ë°°ì—´ê³¼ ë‹¬ë¦¬ arrayë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì˜ì—­ ê°€ë¦¬í‚¬ ìˆ˜ ìˆìŒ
- ì‚¬ì´ì¦ˆ ëŠ˜ë¦¬ê³  ì‹¶ì€ ê²½ìš° ë” í° ë©”ëª¨ë¦¬ í• ë‹¹ ë°›ì•„ì„œ ë‚´ë¶€ ê°’ ë³µì‚¬ ë¶™ì—¬ë„£ê¸°
  - ì •ì  ë°°ì—´ì€ ì´ê²ƒë„ ëª»í•¨
  - ë³´í†µ ë²¡í„° ì¨ì„œ í¸í•˜ê²Œ í•´ê²°



<br>



# ğŸš† í¬ì¸í„°ì™€ Const

## const + pointer

``` cpp
int a = 5;
int b = 10;
const int* ptr_a = &a;

*ptr_a = 10; // Error
ptr_a = &b; // OK
a = 7; // OK
```

- de-referenceë§Œ ë¶ˆê°€ëŠ¥
- ë‹¤ë¥¸ ê±´ ì „ë¶€ ê°€ëŠ¥


<br>

``` cpp
const int a = 5;

const int* ptr1 = &a;	// OK
int* ptr2 = &a;			// Error

int* ptr3;
ptr3 = ptr1; // Error
```

- const valueëŠ” const poointerë¡œë§Œ ì§€ì • ê°€ëŠ¥
- ì¼ë°˜ í¬ì¸í„°ëŠ” const í¬ì¸í„° ë°›ì„ ìˆ˜ ì—†ìŒ



<br>



## pointer + const

``` cpp
int a = 20;
int b = 5;
int* const ptr = &a;

*ptr = 10; // OK
ptr = &b;  // Error
```

- í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œê°’ì„ ëª» ë°”ê¾¸ê²Œ í•¨
- de-referenceëŠ” ê°€ëŠ¥

<br>

``` cpp
const int a = 5;
const int* const ptr = &a;
```

- ì•„ë¬´ê²ƒë„ ëª» í•¨



<br>



# ğŸš† ì°¸ì¡° ë³€ìˆ˜ - Reference Variable

``` cpp
int value = 5;
int &ref = value;

int &ref = 123; // Error
int &ref;       // Error
```

- í¬ì¸í„°ëŠ” ë³€ìˆ˜ì˜ ì£¼ì†Œë¥¼ ë‹´ê³ ìˆìŒ
- ë°˜ë©´ ì°¸ì¡°ëŠ” ê°™ì€ **ë©”ëª¨ë¦¬ë¥¼ ê³µìœ !** (ë³„ëª… ëŠë‚Œ)
- ì´ˆê¸°í™” ë°˜ë“œì‹œ í•´ì•¼í•¨
- R-valueë¡œ ì´ˆê¸°í™” ëª» í•¨(ë©”ëª¨ë¦¬ê°€ ì—†ìŒ)
- const ìƒìˆ˜ëŠ” const referenceë§Œ ê°€ëŠ¥


<br>


## í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ê°ˆ ë•Œ

``` cpp
void doSomething(int &n){};
void doSomething(int (&arr)[5]){};
```

- ë³€ìˆ˜ë¥¼ ë³µì‚¬í•´ì„œ ë„˜ì–´ê°€ëŠ” ê²ƒì´ ì•„ë‹Œ ë³€ìˆ˜ ìì²´ê°€ ë„˜ì–´ê°
- í¬ì¸í„°ë„ ì£¼ì†Œ ë³µì‚¬ê¹Œì§€ëŠ” í•¨
- í¼í¬ë¨¼ìŠ¤ ì¸¡ë©´ì—ì„œë„ reference ì¢‹ìŒ
- ë‹¨ ë°°ì—´ì„ ì°¸ì¡°í•  ë•ŒëŠ” ì‚¬ì´ì¦ˆ ëª…ì‹œí•´ì•¼ í•¨


<br>


## êµ¬ì¡°ì²´(Struct)ì—ì„œ ì•„ì£¼ ìœ ìš©

``` cpp
struct Something
{
	int v1;
	float v2;
};

struct Other
{
	Something st;
};


int main()
{
	Other ot;

	int& v1 = ot.st.v1;
	v1 = 1;

	return 0;
}
```

- ë³€ìˆ˜ ì´ë¦„ì´ ë³µì¡í•  ë•Œ ì°¸ì¡°ì“°ë©´ ê°œê¿€


<br>

## ì°¸ì¡°ì™€ Const

``` cpp
void doSomething(const int& x);

int main()
{
const int x = 5;
int& ref = x;		// Error
const int& ref = x;     // OK

int& ref2 = ref;	// Error

const int& x = 5;	// OK
doSomething(10);

return 0;
}
```

- const ìƒìˆ˜ëŠ” const ì°¸ì¡°ë§Œ ê°€ëŠ¥
- ì¼ë°˜ ì°¸ì¡°ëŠ” const ì°¸ì¡° ëª» ë°›ìŒ (ìš°íšŒí•´ì„œ ë°”ê¿€ê¹Œë´)
- **<span style="color:#bb90e2">const ì°¸ì¡°ëŠ” R-value initialize ê°€ëŠ¥!</span>**
- const ì°¸ì¡°ë¡œ ë³€ìˆ˜ ë„˜ê²¨ì£¼ë©´ ìµœì í™” ê°€ëŠ¥


<br>


## í¬ì¸í„°ì™€ ì°¸ì¡°ì˜ ë©¤ë²„ ì ‘ê·¼

``` cpp
struct Person
{
	int age;
	double weight;
};

int main()
{
	// ì¼ë°˜ì ì¸ ì ‘ê·¼
	Person person;
	person.age = 5;

	// ì°¸ì¡°ë¡œ ì ‘ê·¼
	Person& ref = person;
	ref.age = 15;

	// í¬ì¸í„°ë¡œ ì ‘ê·¼
	Person* ptr = &person;
	ptr->age = 30;
	(*ptr).age = 20; // ì—°ì‚°ì ìš°ì„ ìˆœìœ„ .ì´ *ë³´ë‹¤ ë†’ìŒ

	return 0;
}
```




<br>



# ğŸš† for-each ë°˜ë³µë¬¸

``` cpp
int fibonacci[] = { 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89 };

for (auto number : fibonacci)
  number *= 10;
cout << endl;
```

- ë°°ì—´ ì•ˆì— ìˆëŠ” ì›ì†Œë“¤ì´ í•œ ë²ˆì”© ëŒì•„ê°
- ê°’ì€ ë³µì‚¬í•´ì„œ ë“¤ì–´ê°
  - ê°’ì„ ìˆ˜ì •í•˜ê³  ì‹¶ìœ¼ë©´ reference!
  - ì„±ëŠ¥ ë©´ì—ì„œë„ referenceê°€ ì¢‹ìŒ
- ë™ì  í• ë‹¹ì€ for-each ì‚¬ìš© ë¶ˆê°€ â†’ ë²¡í„°ëŠ” ì‚¬ìš© ê°€ëŠ¥



<br>



# ğŸš† void í¬ì¸í„°

``` cpp
int i = 5;
float f = 3.0;
char c = 'a';

void* ptr = nullptr;

ptr = &i; // OK
ptr = &f; // OK
ptr = &c; // OK


cout << ptr + 1 << endl; // Error
cout << static_cast<char>(*ptr) << endl; // Error
cout << *static_cast<char*>(ptr) << endl; // OK
```

- ìë£Œí˜•ê³¼ ìƒê´€ì—†ì´ í¬ì¸í„° ì‚¬ìš© ê°€ëŠ¥
- **Generic pointer** ë¼ê³ ë„ í•¨
- í¬ì¸í„° ì—°ì‚° ë¶ˆê°€ëŠ¥
- ìë£Œí˜• ìºìŠ¤íŒ…í•´ì„œ ì¨ì•¼ í•¨ (*char í•œ í›„ *)



<br>



# ğŸš† ì´ì¤‘ í¬ì¸í„°

``` cpp
int value = 5;
int* ptr = &value;
int** ptrptr = &ptr;

int row, col;
int** matrix = new int* [row];
for (int r = 0; r < row; r++)
  matrix[r] = new int[col];


for (int r = 0; r < row; r++)
  delete[] matrix[r];
delete[] matrix;
```

- deleteì‹œ ìˆœì„œ ì£¼ì˜


<br>



# ğŸš† std::array & std::vector

``` cpp
#include <array>
#include <vector>

int main()
{
	std::array <int, 5> my_arr = { 1,2,3,4,5 };
	std::vector <int> array = { 1,2,3,4, };
	
	return 0;
}
```

- **array : ì •ì  array ìƒìœ„í˜¸í™˜**
  - classë¡œ í•œ ë²ˆ ë” ê°ì‹¸ì¤€ í˜•íƒœ
  - ì—¬ëŸ¬ê°€ì§€ í¸ë¦¬í•œ í•¨ìˆ˜ë“¤ ë‚´ì¥
  - ë³€ìˆ˜ë¡œ ë„˜ì–´ê°€ë„ ì‚¬ì´ì¦ˆ ê¸°ì–µ (í¬ì¸í„°ë¡œ ì•ˆ ë°”ë€œ)
  - for-each ì‚¬ìš© ê°€ëŠ¥
  - my_arr[10] â†’ ì˜ˆì™¸ì²˜ë¦¬ 
  - ì •ì  arrayëŠ” index ë„˜ì–´ê°€ë„ ì¼ë‹¨ ì ‘ê·¼ì€ í•¨ (ì˜¤ë¥˜ X)
<br>
- **vector : ë™ì  array ìƒìœ„í˜¸í™˜**
  - ì‚¬ì´ì¦ˆ ììœ ë¡­ê²Œ ë³€ê²½ ê°€ëŠ¥
  - ë³€ìˆ˜ë¡œ ë„˜ì–´ê°€ë„ ê¸¸ì´ ê¸°ì–µ
  - delete ì•Œì•„ì„œ í•´ì¤Œ!



<br>
<br>

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}