---
title:  "[ë”°ë°°ì”¨++]Chapter9-1. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©"

categories:
  -  Cpp
tags:
  - [Programming]

toc: true
toc_sticky: true

date: 2022-06-28
last_modified_at: 2022-06-28
---

ì¸í”„ëŸ°ì— ìˆëŠ” í™ì •ëª¨ë‹˜ì˜ **[í™ì •ëª¨ì˜ ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++](https://www.inflearn.com/course/following-c-plus#)** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.<br>
**[ê³µë¶€í•˜ëŠ” ì‹ë¹µë§˜](https://ansohxxn.github.io/categories/cpp)** ë‹˜ì˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.<br>
**[learncpp](https://www.learncpp.com/)** êµì¬ ë‚´ìš©ì„ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.
{: .notice--warning}

<br>



# ğŸš† ì‚°ìˆ  ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

``` cpp

#include <iostream>
using namespace std;

class A
{
public:
    int data_a = 10;
}

int main()
{
    A object1;
    A object2;

    cout << object1 + object2 << endl; // error

    return 0;
}

```

- C++ì˜ ê²½ìš° ì—°ì‚°ìì˜ ì˜¤ë²„ë¡œë”©ì´ ê°€ëŠ¥
- í´ë˜ìŠ¤ê°„ì˜ ì—°ì‚°ì„ ì •ì˜í•´ì„œ ì‚¬ìš© ê°€ëŠ¥
    - add()ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ ì •ì˜ í›„ returní•˜ëŠ” ë°©ì‹
    - ì—°ì‚°ì ì˜¤ë²„ë¡œë”© í•˜ëŠ” ë°©ì‹
- ì—°ì‚°ìê°„ì˜ ìš°ì„ ìˆœìœ„ëŠ” ë³€í•˜ì§€ ì•ŠìŒ

<br>

> (return íƒ€ì…) opeator (ì—°ì‚°ì) (parameters)

``` cpp

class A
{
public:
    int data_a = 10;
};

int operator + (const A &a, const A &b)
{
    return a.data_a + b.data_a;
}

int main()
{
    A object1;
    A object2;

    cout << object1 + object2 << endl; // 20

    return 0;
}

```

<br>

## ì˜¤ë²„ë¡œë”© ë¶ˆê°€ëŠ¥í•œ ì—°ì‚°ì

- `? true:false` : 3í•­ ì—°ì‚°ì
- `::` : namespaceë²”ìœ„ ì§€ì • ì—°ì‚°ì
- `sizeof` : í¬ê¸° ì—°ì‚°ì
- `.`, `.*` : ë©¤ë²„ ì„ íƒ (í¬ì¸í„°)ì—°ì‚°ì


<br>

# ğŸš† ì „ì—­ í•¨ìˆ˜ vs ë©¤ë²„ í•¨ìˆ˜

## ì „ì—­ í•¨ìˆ˜ë¡œ ì˜¤ë²„ë¡œë”©

``` cpp

class Cents
{
private:
    int m_cents;

public:
    Cents(int cents = 0) { m_cents = cents; }

    friend int operator+(const Cents &c1, const Cents &c2); // friendly ì„ ì–¸
};

int operator+(const Cents &c1, const Cents &c2)
{
    return c1.m_cents + c2.m_cents;
}

int main()
{
    Cents cents1(5);
    Cents cents2(7);

    cout << cents1 + cents2 << endl; // 12

    return 0;
}

```

- private ë©¤ë²„ì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ” ê²½ìš° getter í•¨ìˆ˜ ì´ìš©
- ë˜ëŠ” friendly í•¨ìˆ˜ë¡œ ì ‘ê·¼


<br>

## ë©¤ë²„ í•¨ìˆ˜ë¡œ ì˜¤ë²„ë¡œë”©


``` cpp

class A
{
private:
    int data_a = 10;

public:
    int operator + (const A &a)
    {
    return data_a + a.data_a;
    }

};

int main()
{
    A object1;
    A object2;

    cout << object1 + object2 << endl; // 20

    return 0;
}

```

- ë©¤ë²„ í•¨ìˆ˜ì˜ ê²½ìš° this íŒŒë¼ë¯¸í„°ê°€ ìƒëµë˜ì–´ ìˆìŒ
- priave ë³€ìˆ˜ ì ‘ê·¼ ê°€ëŠ¥



<br>

# ğŸš† ì…ì¶œë ¥ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

ì…ì¶œë ¥ ì—°ì‚°ì— ì‚¬ìš©ë˜ëŠ” `iostream` classëŠ” ë‹¤ìŒ ë‘ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
- ì…ë ¥ì„ ë‹´ë‹¹í•˜ëŠ” `istream`
- ì¶œë ¥ì„ ë‹´ë‹¹í•˜ëŠ” `ostream`

<br>

> ì˜ˆë¥¼ ë“¤ì–´ std::coutì€ ostreamì˜ ê°ì²´. <br>ì‚¬ì‹¤ì€ ëª¨ë‘ ì˜¤ë²„ë¡œë”© í•´ë‘” ê²ƒ

``` cpp

ostream& operator<<(bool& val);
ostream& operator<<(short& val);
ostream& operator<<(unsigned short& val);
ostream& operator<<(int& val);
ostream& operator<<(unsigned int& val);
ostream& operator<<(long& val);
ostream& operator<<(unsigned long& val);
ostream& operator<<(float& val);
ostream& operator<<(double& val);
ostream& operator<<(long double& val);
ostream& operator<<(void* val);
...

```

- ë”°ë¼ì„œ ì…ì¶œë ¥ ì—°ì‚°ìë¥¼ ë©¤ë²„ í•¨ìˆ˜ë¡œ ì„ ì–¸í•˜ë ¤ë©´ istream/ostream ë‚´ë¶€ì—ì„œ í•´ì•¼ í•¨
    - ì „ì—­í•¨ìˆ˜ë¡œë§Œ ì •ì˜ ê°€ëŠ¥!


<br>

``` cpp

class Point
{
private:
    double m_x, m_y, m_z;

public:
    Point(double x = 0.0, double y = 0.0, double z = 0.0)
        : m_x(x), m_y(y), m_z(z)
    {
    }

    friend std::ostream &operator<<(std::ostream &out, const Point &point)
    {
        out << "( " << point.m_x << ", " << point.m_y << ", " << point.m_z << " )";

        return out;
    }
};

int main()
{
    Point p1(0.0, 0.1, 0.2);
    Point p2(3.4, 1.5, 2.0);

    cout << p1 << " " << p2 << endl; // ( 0, 0.1, 0.2 ) ( 3.4, 1.5, 2 )

    return 0;
}

```

- << ì—°ì‚°ìì˜ ì˜¤ë²„ë¡œë”©ì´ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì •ì˜ë˜ì–´ ìˆì–´ë„ ì „ì—­ í•¨ìˆ˜(friend íŠ¹ì´ì¼€ì´ìŠ¤)
- std::ostream ê°ì²´ë¡œ return ë°›ì•„ì•¼ chaining ê°€ëŠ¥
- ostream ê°ì²´ì˜ << ì˜¤ë²„ë¡œë”© í•˜ëŠ” ë°©ì‹


<br>




# ğŸš† ë¹„êµ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

``` cpp

class Cents
{
private:
    int m_cents;

public:
    Cents(int cents = 0) { m_cents = cents; }
    int getCents() const { return m_cents; }
    int &getCents() { return m_cents; }

    friend bool operator<(const Cents &c1, const Cents &c2)
    {
        return c1.m_cents < c2.m_cents;
    }

    friend bool operator==(const Cents &c1, const Cents &c2)
    {
        return c1.m_cents == c2.m_cents;
    }

    friend std::ostream &operator<<(std::ostream &out, const Cents &cents)
    {
        out << cents.m_cents;
        return out;
    }
};

int main()
{
    vector<Cents> arr(10);
    unsigned seed = std::chrono::system_clock::now().time_since_epoch().count();

    for (unsigned i = 0; i < 10; ++i)
        arr[i].getCents() = i;

    std::shuffle(begin(arr), end(arr), std::default_random_engine(seed));

    for (auto &e : arr)
        cout << e << " ";
    cout << endl;

    std::sort(begin(arr), end(arr));

    for (auto &e : arr)
        cout << e << " ";
    cout << endl;

    return 0;
} 

```

- ë¹„êµ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”© í•  ê²½ìš° sorting ê°€ëŠ¥
- `<`, `==` ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”© í•´ì•¼ í•¨
- ë©¤ë²„ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ë©´ ì •ë ¬ì´ ì•ˆë¨ (ì–´ì§¸ì„œ..?)



<br>




# ğŸš† ì¦ê° ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

## ì „ìœ„ ì¦ê° ì—°ì‚°ì

``` cpp
class Digit
{
private:
    int m_digit;

public:
    Digit(int digit = 0) : m_digit(digit) {}

    friend ostream &operator<<(ostream &out, const Digit &d)
    {
        out << d.m_digit;
        return out;
    }

    friend Digit &operator++(Digit &digit)
    {
        ++digit.m_digit;
        return digit;
    }
};

int main()
{
    Digit d(5);

    cout << ++d << endl; // 6
    cout << d << endl;   // 6

    return 0;
}
```

- ì¦ê° ì—°ì‚°ìì˜ ê²½ìš° ìê¸° ìì‹ ì„ return godi gka
- Parameterë¡œëŠ” ì°¸ì¡° ê°ì²´ë¥¼ ë°›ì•„ì•¼ í•˜ë©°, ì¦ê° ì—°ì‚°ì´ ì´ë£¨ì–´ì €ì•¼ í•˜ë¯€ë¡œ const x

<br>

> ë©¤ë²„ í•¨ìˆ˜ë¡œ êµ¬í˜„

``` cpp
Digit & operator ++ ()
{
    ++m_digit;
    
    return *this;
}
```

<br>

## í›„ìœ„ ì¦ê° ì—°ì‚°ì

``` cpp
class Digit
{
private:
    int m_digit;

public:
    Digit(int digit = 0) : m_digit(digit) {}

    friend ostream &operator<<(ostream &out, const Digit &d)
    {
        out << d.m_digit;
        return out;
    }

    // prefix
    friend Digit &operator++(Digit &digit)
    {
        ++digit.m_digit;
        return digit;
    }

    // postfix
    friend Digit operator++(Digit &digit, int)
    {
        Digit temp(digit.m_digit);
        ++digit;
        return temp;
    }
};

int main()
{
    Digit d(5);

    cout << d++ << endl; // 5
    cout << d << endl;   // 6

    return 0;
}
```

- ë³´í†µ í›„ìœ„ ì¦ê° ì—°ì‚°ìëŠ” ì „ìœ„ ì¦ê° ì—°ì‚°ìë¥¼ í†µí•´ êµ¬í˜„
- ì„ì‹œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì €ì¥í•˜ê³ , í•´ë‹¹ ê°ì²´ë¥¼ ë¦¬í„´ ë°›ëŠ” ë°©ì‹
- ì „ìœ„ ì—°ì‚°ìì™€ ë¦¬í„´ íƒ€ì…ë§Œ ë‹¤ë¥´ê³  ë‚˜ë¨¸ì§€ëŠ” ë™ì¼
    - ë¬¸ì œëŠ” ë¦¬í„´ íƒ€ì…ì´ í•¨ìˆ˜ì˜ ì‹œê·¸ë‹ˆì³ê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒ
    - í•¨ìˆ˜ë¥¼ êµ¬ë¶„í•´ì£¼ê¸° ìœ„í•´ dummy parameter (int) ì¶”ê°€


<br>

> ë©¤ë²„ í•¨ìˆ˜ë¡œ êµ¬í˜„

``` cpp
Digit operator ++ (int)
{
    Digit temp(m_digit);
    ++(*this)
    return temp;
}
```



<br>



# ğŸš† ì²¨ì ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

> ë©¤ë²„ ë³€ìˆ˜ë¡œ listë¥¼ ê°–ê³  ìˆëŠ” ê²½ìš°, ì²¨ì ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ì´ ì—†ë‹¤ë©´ ë§¤ìš° ë¶ˆí¸ <br>í¬ì¸í„°ë¡œ list êº¼ë‚¸ í›„ indexë¡œ ê°€ì ¸ì™€ì•¼ í•¨

``` cpp
class IntList
{
private:
    int m_list[10];

public:
    int &operator[](const int index)
    {
        return m_list[index];
    }
};

int main()
{
    IntList my_list;

    my_list[3] = 10;
    cout << my_list[3] << endl; // 10

    return 0;
}
```

- ì£¼ì˜) ì°¸ì¡°ë¡œ ë¦¬í„´í•´ì•¼ L-Valueë¡œ ì‚¬ìš© ê°€ëŠ¥

<br>

``` cpp

class IntList
{
private:
    int m_list[10] = {1,2,3,4,5,6,7,8,9,10};

public:
    int &operator[](const int index)
    {
        assert(index >=0);
        assert(index<10);
        return m_list[index];
    }

    const int & operator [] (const int index) const
    {
        assert(index >=0);
        assert(index<10);
        return m_list[index];
    }
};

int main()
{
    const IntList my_list;

    my_list[3] = 10; // error
    cout << my_list[3] << endl; // 10

    return 0;
}

```

- read onlyì¼ ê²½ìš° constìš© ì˜¤ë²„ë¡œë”© ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŒ
    - (const ì—¬ë¶€ë¡œë„ ì˜¤ë²„ë¡œë”© ê°€ëŠ¥)
- ì²¨ì ì—°ì‚°ìì˜ ê²½ìš° assertë¡œ ë²”ìœ„ ì§€ì •í•´ì£¼ë©´ ì¢‹ìŒ


<br>



# ğŸš† ë³€í™˜ ìƒì„±ì - Explicit / Delete

``` cpp

class Fraction
{
private:
    int m_numerator;
    int m_denominator;

public:
    Fraction(int num = 0, int den = 1)
        : m_numerator(num), m_denominator(den)
    {
        assert(den != 0);
    }

    friend ostream &operator<<(ostream &out, const Fraction &f)
    {
        out << f.m_numerator << " / " << f.m_denominator << endl;
        return out;
    }
};

void doSomething(Fraction frac)
{
    cout << frac << endl;
}

int main()
{
    doSomething(7); // 7/1

    return 0;
}

```

- doSomething(7)ì˜ ê²½ìš° doSomething(Fraction(7,1))ë¡œ ì¸ì‹ : ë³€í™˜ ìƒì„±ì

<br>

> ì»´íŒŒì¼ëŸ¬ì˜ ê°œì… ì—†ì´ ìƒì„±ìë¥¼ ëª…í™•í•˜ê²Œ ì§€ì •í•˜ê³  ì‹¶ì€ ê²½ìš°

``` cpp

explicit Fraction(int num = 0, int den = 1)
	: m_numerator(num), m_denominator(den)
{
	assert(den != 0); 
}

int main()
{
    doSomething(7) // error

}
```

- ìƒì„±ì ì•ì— explicit í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ë©´ parametersê°€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•¨

<br>

``` cpp

Fraction(const Fraction &frac) = delete;

```

- delete : í•´ë‹¹ íƒ€ì…ì˜ parameterëŠ” ë°›ì§€ ì•Šê² ë‹¤




<br>



# ğŸš† ì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬

> ë©¤ë²„ ë³€ìˆ˜ì— í¬ì¸í„°(ë™ì  í• ë‹¹ ë©”ëª¨ë¦¬) ê°ì²´ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš° ë³µì‚¬ ìƒì„±ì / ëŒ€ì… ì—°ì‚°ì ì‚¬ìš©ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

``` cpp

class MyString
{
public:
    char *m_data = nullptr;
    int m_length = 0;

    MyString(const char *source = "")
    {
        assert(source);

        m_length = strlen(source) + 1;
        m_data = new char[m_length];

        for (int i=0; i<m_length; ++i)
            m_data[i] = source[i];
        
        m_data[m_length - 1] = '\0';
    }

    // default copy constructor
    MyString(const MyString &other)
    {
        m_data = other.m_data;
        m_length = other.m_length;
    }

    ~MyString()
    {
        delete [] m_data;
    }
};

int main()
{
    MyString str1("Hello");

    MyString str2(str1); // ë³µì‚¬ ìƒì„±ì
    MyString str3 = str1; // ë³µì‚¬ ìƒì„±ì

    str2 = str1; // ëŒ€ì… ì—°ì‚°ì

    return 0;
}

```

- í¬ì¸í„°ë¥¼ ì–•ì€ ë³µì‚¬ë¡œ ê°€ì ¸ì˜¨ ê²½ìš° ê´€ë¦¬ê°€ ì•ˆë¨ 
- ì´ëŸ° ê²½ìš° ë³µì‚¬ ìƒì„±ì / ëŒ€ì… ì—°ì‚°ì ì˜¤ë²„ë¡œë”© í•´ì£¼ì–´ì•¼ í•¨


<br>

> ë³µì‚¬ ìƒì„±ì : ìƒˆë¡œ ë©”ëª¨ë¦¬ í• ë‹¹í•˜ê³  ë‚´ìš© ë³µì‚¬

``` cpp

MyString(const MyString &source) 
{
	m_length = source.m_length; 

	if (source.m_data != nullptr) 
	{
		m_data = new char[m_length];  

		for (int i = 0; i < m_length; ++i)
			m_data[i] = source.m_data[i];
	}
	else
		m_data = nullptr;	
}

```

<br>

> ëŒ€ì… ì—°ì‚°ì : ë³µì‚¬ ìƒì„±ìì™€ ë™ì¼ + ê¸°ì¡´ ë©”ëª¨ë¦¬ í•´ì œ í•´ì£¼ì–´ì•¼ í•¨

``` cpp

MyString& operator = (const MyString & source)
{
	if (this == &source)   // ìê¸° ìì‹ ì„ ëŒ€ì…í•˜ëŠ” ê²½ìš°
		return *this;

	delete[] m_data;   // ìì‹ ì˜ ê¸°ì¡´ ë‚´ìš©ë¬¼ ë¹„ì›Œì£¼ê¸° 

	m_length = source.m_length;

	if (source.m_data != nullptr)
	{
		m_data = new char[m_length];

		for (int i = 0; i < m_length; ++i)
			m_data[i] = source.m_data[i];
	}
    else
        m_data = nullptr;
}

```



<br>



# ğŸš† Initializer_list

> ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ì˜ ê²½ìš° ì¤‘ê´„í˜¸ë¡œ í¸í•˜ê²Œ ì´ˆê¸°í™” í•˜ì§€ ëª»í•¨ -> initialzer_list ì´ìš©

``` cpp

#include <iostream>
#include <cassert>
#include <initializer_list>
using namespace std;

class IntArray
{
private:
    unsigned m_length = 0;
    int *m_data = nullptr;

public:
    IntArray(unsigned length)
        : m_length(length)
    {
        m_data = new int[length];
    }

    IntArray(const std::initializer_list<int> &list)
        : IntArray(list.size())
    {
        int count = 0;
        for (auto &element : list)
        {
            m_data[count] = element;
            ++count;
        }
    }

    ~IntArray()
    {
        delete[] this->m_data;
    }

    friend ostream &operator<<(ostream &out, IntArray arr)
    {
        for (unsigned i = 0; i < arr.m_length; ++i)
            out << arr.m_data[i] << " ";
        out << endl;

        return out;
    }
};

int main()
{
    IntArray int_array = {1, 2, 3, 4, 5}; // ì¤‘ê´„í˜¸ë¡œ ìƒì„±ì í˜¸ì¶œ ê°€ëŠ¥

    cout << int_array << endl;

    return 0;
}

```

- #include <initializer_list>
- initialize_listì˜ ê²½ìš° []ì ‘ê·¼ ëª»í•¨
- ê°œë³„ ì›ì†Œë¥¼ ì–•ì€ ë³µì‚¬ë¡œ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— í•„ìš”í•œ ê²½ìš° ê¹Šì€ ë³µì‚¬ë¡œ ì˜¤ë²„ë¡œë”© í•´ì•¼í•¨





<br>
<br>

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}