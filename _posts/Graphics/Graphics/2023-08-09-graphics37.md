---
title:  "Shader Toy - Fractal" 

categories:
  -  Graphics
tags:
  - [DirectX]

toc: true
toc_sticky: true

date: 2023-08-08
last_modified_at: 2023-08-08
---


ìœ íŠœë¸Œ kishimisuì˜ **[An introduction to Shader Art Coding](https://www.youtube.com/watch?v=f4s1h2YETNY)** ì˜ìƒì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. <br>ì¤‘ê°„ì— ë“±ì¥í•˜ëŠ” ìë£Œë“¤ì€ ì˜ìƒì„ ìº¡ì²˜í•œ ê²ƒì…ë‹ˆë‹¤. <br>ì´ë²ˆ í¬ìŠ¤íŒ…ì˜ ì˜ˆì œëŠ” **[Shadertoy](https://www.shadertoy.com/)** ì—ì„œ GLSLë¡œ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.
{: .notice--warning}

<br>


# ğŸ¥ UV ì¢Œí‘œê³„ ìˆ˜ì •

| origin resolution | downsampled resolution |
|:-:|:-:|
|![1](https://github.com/inhopp/inhopp/assets/96368476/c6a73e00-20ca-424f-a1ce-45c8ef70ce1a)|![2](https://github.com/inhopp/inhopp/assets/96368476/26edeeca-4db0-412d-80e4-fb79dd9f59ec)| 

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = fragCoord / iResolution.xy;  // 0 ~ 1
    
    uv = uv - 0.5; // align center
    uv = uv * 2.0; // -1 ~ 1

    fragColor = vec4(uv, 0.0, 1.0);
}
```

- ìŠ¤í¬ë¦°ì˜ ì¤‘ì•™ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì—…ì„ í•˜ê¸° ë•Œë¬¸ì— uv ì¢Œí‘œê³„ë¥¼ center ì¤‘ì‹¬ìœ¼ë¡œ ë°”ê¿”ì£¼ê¸°


<br>


# ğŸ¥ Fix Aspect Ratio

| Before Fix | After Fix |
|:-:|:-:|
|![4](https://github.com/inhopp/inhopp/assets/96368476/def2911a-e9fa-42b4-8197-af5e1c411427)| ![3](https://github.com/inhopp/inhopp/assets/96368476/62da4e64-583d-48a8-83d4-64bb74ea118e) | 

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = fragCoord / iResolution.xy;  // 0 ~ 1
    
    uv = uv - 0.5; // align center
    uv = uv * 2.0; // -1 ~ 1

    fragColor = vec4(uv, 0.0, 1.0);
}
```

- ì¼ë°˜ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ì˜ ê°€ë¡œxì„¸ë¡œ í•´ìƒë„ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì •ì‚¬ê°í˜• ëª¨ì–‘ì˜ ìŠ¤í¬ë¦°ì„ ì›í•œë‹¤ë©´ aspect ratioë¥¼ ë³´ì •í•´ì•¼ í•œë‹¤.


<br>


# ğŸ¥ 2D Signed Distance Function

![5](https://github.com/inhopp/inhopp/assets/96368476/2f73f64f-6396-4a95-8300-2a1c1c687ca8){: width="50%" height="60%"}

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
    
    float d = length(uv);
    d -= 0.5;
    d = abs(d);

    fragColor = vec4(d, d, d, 1.0);
}
```

- ë¬¼ì²´ì˜ í‘œë©´ì„ í‘œí˜„í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” SDF
- Signed Distance Function : ë¬¼ì²´ì˜ í˜•íƒœë¥¼ ìœ ì§€í•˜ëŠ” level set
    - negative : ë¬¼ì²´ ë‚´ë¶€
    - zero : ë¬¼ì²´ í‘œë©´
    - positive : ë¬¼ì²´ ì™¸ë¶€
- absolute value, abs()ë¥¼ ì´ìš©í•˜ì—¬ ë‚´ë¶€, ì™¸ë¶€ ëª¨ë‘ í°ìƒ‰ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ê¸°
- Q ) ê²½ê³„ë©´ ì¢€ ë” ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ëŠ” ì—†ë‚˜..??

<br>

## Step Function

| Graph | Result |
|:-:|:-:|
|![5](https://github.com/inhopp/inhopp/assets/96368476/79c1fa16-86d2-484e-a083-f511a7bc0433)|![6](https://github.com/inhopp/inhopp/assets/96368476/850744b6-be35-4f93-8d47-e9cff7c7775f)| 

- step functionì„ ì´ìš©í•˜ë©´ ì¹¼ ê°™ì€ ê²½ê³„ í‘œí˜„ ê°€ëŠ¥

<br>

## Smoothstep Function

| Graph | Result |
|:-:|:-:|
|![7](https://github.com/inhopp/inhopp/assets/96368476/dc521cbd-ca65-4629-a9fb-a96c530e2ef4)|![8](https://github.com/inhopp/inhopp/assets/96368476/eb751f6f-c968-4459-9574-e6c02db7efcd)| 

- smoothstepìœ¼ë¡œëŠ” ì›í•˜ëŠ” ë‘ê»˜ë¡œ ë¶€ë“œëŸ½ê²Œ í‘œí˜„ ê°€ëŠ¥

<br>


# ğŸ¥ Sine í•¨ìˆ˜ë¡œ ì£¼ê¸° ë§Œë“¤ê¸°

![9](https://github.com/inhopp/inhopp/assets/96368476/5ffd8860-ba0a-4cb4-8337-d90f27d14516){: width="50%" height="60%"}

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
    
    float d = length(uv);

    d = sin(d * 8.0 + iTime) / (8.0);
    d = abs(d);

    d = smoothstep(0.0, 0.1, d);

    fragColor = vec4(d, d, d, 1.0);
}
```

- sine functionì„ ì´ìš©í•˜ì—¬ ì£¼ê¸°ë¥¼ ì£¼ê³ 
- iTimeì„ ë”í•´ì£¼ë©° ì›€ì§ì„ í‘œí˜„


<br>


# ğŸ¥ 1/x í•¨ìˆ˜ë¡œ ìƒ‰ ë°˜ì „ì‹œí‚¤ê¸°

| Graph | Result |
|:-:|:-:|
|![10](https://github.com/inhopp/inhopp/assets/96368476/87879abe-aa21-4b8f-95f2-feb7da10bb67)|![11](https://github.com/inhopp/inhopp/assets/96368476/1c201e83-fcea-4114-9e0d-13b39859e723)| 

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
    
    float d = length(uv);

    d = sin(d * 8.0 + iTime) / (8.0);
    d = abs(d);

    d = 0.01 / d;

    fragColor = vec4(d, d, d, 1.0);
}
```

- ìƒ‰ì„ ë°˜ì „ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” 0 -> 1, 1 -> 0 ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ë³€ê²½í•´ì•¼ í•¨
- 1/x í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ì›í•˜ëŠ” ê°•ë„ë¡œ ë¶€ë“œëŸ½ê²Œ ë°˜ì „ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- color ê³±í•´ì£¼ë©´ ì•Œë¡ë‹¬ë¡ í‘œí˜„ ê°€ëŠ¥

<br>

| Example1 | Example2 |
|:-:|:-:|
|![12](https://github.com/inhopp/inhopp/assets/96368476/01276e56-d7fa-4892-82f7-1cdbf9f8ef42)|![13](https://github.com/inhopp/inhopp/assets/96368476/a9b62aee-a309-458f-801d-c853a70befd5)| 



<br>


# ğŸ¥ Palette ë§Œë“¤ê¸°

``` glsl
vec3 palette(float t)
{
    vec3 a = vec3(0.5, 0.5, 0.5);
    vec3 a = vec3(0.5, 0.5, 0.5);
    vec3 a = vec3(1.0, 1.0, 1.0);
    vec3 a = vec3(0.263, 0.416, 0.557);

    vec3 a + b*cos(6.28318 * (c*t + d));
}


void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
    
    float d = length(uv);

    vec3 col = palette(d + iTime);

    d = sin(d * 8.0 + iTime) / (8.0);
    d = abs(d);

    d = 0.02 / d;

    col *= d;

    fragColor = vec4(col, 1.0);
}
```

![16](https://github.com/inhopp/inhopp/assets/96368476/0da80753-3052-44cb-9b09-97e5c3d2fcba){: width="60%" height="70%"}


> [ Inigo Quilez website](https://iquilezles.org/articles/palettes/)

- ìœ„ ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°€ë©´ ì›í•˜ëŠ” íŒ”ë ˆíŠ¸ì˜ ë³€ìˆ˜ ê°’ë“¤ì„ ì°¾ì„ ìˆ˜ ìˆìŒ
- ì—°ì†ì ìœ¼ë¡œ ìƒ‰ì´ ë³€í•˜ëŠ” íŒ”ë ˆíŠ¸ì´ê¸° ë•Œë¬¸ì— ì‹œê°„ì— ë”°ë¥¸ ì£¼ê¸°í•¨ìˆ˜ì— ì“°ê¸° ì¢‹ë‹¤.
- palette ë³€ìˆ˜ë¡œ timeì„ ë”í•´ì£¼ë©´ ê°™ì€ ì› ë‚´ì—ì„œë„ ì•Œë¡ë‹¬ë¡ ë³€í•¨

<br>

| Example1 | Example2 |
|:-:|:-:|
|![15](https://github.com/inhopp/inhopp/assets/96368476/299808ec-3a19-4f53-88e8-efda52a8a12a)|![14](https://github.com/inhopp/inhopp/assets/96368476/c5d67b6e-49fd-4f0f-bdb9-29db1c78f6d0)| 



<br>


# ğŸ¥ Fraction í•¨ìˆ˜ë¡œ ìŠ¤í¬ë¦° ë¶„í• 

| Graph | Result |
|:-:|:-:|
|![17](https://github.com/inhopp/inhopp/assets/96368476/9125573d-327a-4a55-b605-a59058bde443)|![18](https://github.com/inhopp/inhopp/assets/96368476/8172e7d3-cab0-4986-b2a4-728619164d24)| 


``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y; // -1 ~ 1
    
    uv = fract(uv * 2.0) - 0.5; // -2 ~ 2 : ê°€ë¡œì„¸ë¡œ 4ë“±ë¶„ & center ë³´ì •
    
    float d = length(uv);

    vec3 col = palette(d + iTime);

    d = sin(d * 8.0 + iTime) / (8.0);
    d = abs(d);

    d = 0.02 / d;

    col *= d;

    fragColor = vec4(col, 1.0);
}
```

- fraction : ì •ìˆ˜ ë¶€ë¶„ì„ ëº€ ì†Œìˆ˜ ë¶€ë¶„
- uvì˜ ë²”ìœ„ë¥¼ ëŠ˜ë ¤ì£¼ê³  fractionì„ ì´ìš©í•˜ë©´ ìŠ¤í¬ë¦°ì„ ë°˜ë³µí•  ìˆ˜ ìˆìŒ


<br>

## Global Effect ì¶”ê°€í•˜ê¸°

![ezgif com-video-to-gif (6)](https://github.com/inhopp/inhopp/assets/96368476/f476164d-57fa-463d-8ac5-605420de8091){: width="50%" height="60%"}

``` glsl
void main(out vec4 fragColor, in vec2 fragCoord)
{
    vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y; // -1 ~ 1
    vec2 uv0 = uv; // glbal coordinate

    uv = fract(uv * 2.0) - 0.5; // -2 ~ 2 : ê°€ë¡œì„¸ë¡œ 4ë“±ë¶„ & center ë³´ì •
    
    float d = length(uv);

    vec3 col = palette(length(uv0) + iTime); // global effect

    d = sin(d * 8.0 + iTime) / (8.0);
    d = abs(d);

    d = 0.02 / d;

    col *= d;

    fragColor = vec4(col, 1.0);
}
```

- fraction ì ìš© ì „ global coordinate(?)ì„ ì €ì¥í•´ë‘ê³ , ì´ë¥¼ ì´ìš©í•˜ì—¬ global effectë¥¼ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤.


<br>


# ğŸ¥ Iterationìœ¼ë¡œ Fractal êµ¬ì¡° ë§Œë“¤ê¸°

![ezgif com-video-to-gif (7)](https://github.com/inhopp/inhopp/assets/96368476/7eaf0aec-e6a2-4bbe-b6d7-1964d1830831){: width="50%" height="60%"}


``` glsl
void main( out vec4 fragColor, in vec2 fragCoord )
{
     vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
     vec2 uv0 = uv;
     vec3 finalColor = vec3(0.0);
     
     for(float i=0.0; i<2.0; i++) 
     {
         uv = fract(uv * 2.0) - 0.5;

         float d = length(uv);

         vec3 col = palette(length(uv0) + iTime);

         d = sin(d*8. + iTime) / 8. ;
         d = abs(d);

         d = 0.02  / d;

         finalColor += col * d;
     }
     
     fragColor = vec4(finalColor, 1.0);
}
```

- fractionìœ¼ë¡œ ìª¼ê°  ì˜ì—­ ì•ˆì—ì„œ ë˜ fractionìœ¼ë¡œ ìª¼ê°œë²„ë¦¬ê¸°
- ië¥¼ ëŠ˜ë ¤ì£¼ë©´ì„œ fractal êµ¬ì¡° ë§Œë“¤ ìˆ˜ ìˆìŒ



<br>


# ğŸ¥ Final Results

```glsl
void main( out vec4 fragColor, in vec2 fragCoord )
{
     vec2 uv = (fragCoord * 2.0 - iResolution.xy) / iResolution.y;
     vec2 uv0 = uv;
     vec3 finalColor = vec3(0.0);
     
     
     for(float i=0.0; i<4.0; i++) 
     {
         uv = fract(uv * 1.5) - 0.5;

         float d = length(uv) * exp(-length(uv0));

         vec3 col = palette(length(uv0) + i*0.4 + iTime*0.4);

         d = sin(d*8. + iTime) / 8. ;
         d = abs(d);

         d = pow(0.01 / d, 1.2);

         finalColor += col * d;
     }
     
     fragColor = vec4(finalColor, 1.0); 
}
```

- ê·œì¹™ì„±ì„ í©íŠ¸ë ¤ ëœ°ì´ê¸° ìœ„í•´ ëª‡ ê°€ì§€ ì‘ì—… ìˆ˜í–‰
- forë¬¸ ì•ˆì—ì„œ 2.0ì´ ì•„ë‹Œ 1.5ë°°ë¡œ ì• ë§¤í•˜ê²Œ ìª¼ê°œê¸°
- d = x * exp(-x), ë¶€ë“œëŸ¬ìš´ í˜•íƒœë¡œ ë³€í˜•
- 0~1 ì‚¬ì´ì— pow í•¨ìˆ˜ë¥¼ ì ìš©í•´ ì–´ë‘ìš´ ë¶€ë¶„ì€ ë” ì–´ë‘¡ê²Œ í‘œí˜„

<br>

![ezgif com-crop (4)](https://github.com/inhopp/inhopp/assets/96368476/bcc16fc7-9456-4fd7-a4f6-ba3fe01875ba)



<br>
<br>


[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}