---
title:  "MVP (Model, View, Projection)" 

categories:
  -  Graphics
tags:
  - [DirectX]

toc: true
toc_sticky: true

date: 2023-07-22
last_modified_at: 2023-07-22
---


í™ì •ëª¨ë‹˜ì˜ **[ê·¸ë˜í”½ìŠ¤ ìƒˆì‹¹ì½”ìŠ¤](https://honglab.co.kr/)** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.
{: .notice--warning}

<br>


# ğŸ¥ Constant Buffer

``` cpp
// Constant Buffer in hlsl file (vertex shader)
cbuffer ModelViewProjectionConstantBuffer : register(b0) {
    matrix model;
    matrix view;
    matrix prohection;
}
```

- MVPë³€í™˜ì˜ ê²½ìš° cpuì—ì„œ ì—°ì‚° í›„ gpuë¡œ ë³´ë‚´ì¤Œ
- gpuë¡œ ë„˜ì–´ê°€ë©´ ë²„í¼ì˜ ë‚´ìš©ì´ ìˆ˜ì •ë  ì¼ì´ ì—†ê¸° ë•Œë¬¸ì— constant bufferë¡œ ë³´ë‚´ì¤Œ

<br>


# ğŸ¥ Model Transform

``` cpp
    m_constantBufferData.model =
        Matrix::CreateScale(m_modelScaling) * Matrix::CreateRotationY(m_modelRotation.y) *
        Matrix::CreateRotationX(m_modelRotation.x) * Matrix::CreateRotationZ(m_modelRotation.z) *
        Matrix::CreateTranslation(m_modelTranslation);
    m_constantBufferData.model = m_constantBufferData.model.Transpose();
```

- Model Transfromì˜ ìˆœì„œëŠ” scale -> rotation -> translation
- ì´ë•Œ ë¬¸ì œê°€ í•˜ë‚˜ ìˆëŠ”ë° DirectXëŠ” row major, hlslì€ column majorë¼ëŠ” ê²ƒ
- ìˆœì„œ ë°˜ëŒ€ë¡œ ì—°ì‚° í›„ transposeë¡œ ë³´ë‚´ì£¼ì–´ì•¼ í•¨

<br>

![ezgif com-crop (3)](https://github.com/inhopp/inhopp/assets/96368476/e5648c67-dc48-46e3-94ed-b0a0175dcf85)

<br>


# ğŸ¥ View Transform

![1](https://github.com/inhopp/inhopp/assets/96368476/36fd1abd-4a4e-4363-9434-c56f4af5ef83){: width="60%" height="70%"}

``` cpp
    m_constantBufferData.view = XMMatrixLookToLH(m_viewEyePos, m_viewEyeDir, m_viewUp);
    m_constantBufferData.view = m_constantBufferData.view.Transpose();
```

- View Transformì€ lookup matrixë¥¼ ì´ìš©
- ì¹´ë©”ë¼ ìœ„ì¹˜, ë°”ë¼ë³´ëŠ” ë°©í–¥, ì¹´ë©”ë¼ì˜ normalë¡œ ê²°ì •


<br>


# ğŸ¥ Projection Transform

``` cpp
    if (m_usePerspectiveProjection) {
        m_constantBufferData.projection = XMMatrixPerspectiveFovLH(
            XMConvertToRadians(m_projFovAngleY), m_aspect, m_nearZ, m_farZ);
    } else {
        m_constantBufferData.projection =
            XMMatrixOrthographicOffCenterLH(-m_aspect, m_aspect, -1.0f, 1.0f, m_nearZ, m_farZ);
    }
    m_constantBufferData.projection = m_constantBufferData.projection.Transpose();
```

![2](https://github.com/inhopp/inhopp/assets/96368476/989c7ecb-2cfe-4eae-b345-451f110849c5){: width="60%" height="70%"}

- í™”ê°?ì˜ ìœ„ì•„ë˜ ê°ë„ëŠ” FOV(field of view)ë³€ìˆ˜ë¡œ ì§€ì •
- ì¢Œìš° ê°ë„ëŠ” ëª¨ë‹ˆí„°ì˜ ë¹„ìœ¨ë¡œ ê²°ì •
- ì‹¤ì œ ë Œë”ë§ë˜ëŠ” ë¶€ë¶„ì€ near plane, far plane ì‚¬ì´ì˜ objectë“¤

<br>

![ezgif com-crop (2)](https://github.com/inhopp/inhopp/assets/96368476/5393c759-085e-43d9-8c94-af7660a6f110)




<br>
<br>


[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}