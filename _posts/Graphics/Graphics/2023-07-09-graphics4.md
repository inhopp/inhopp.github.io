---
title:  "Ray Tracing - Draw Triangle" 

categories:
  -  Graphics
tags:
  - [DirectX]

toc: true
toc_sticky: true

date: 2023-07-09
last_modified_at: 2023-07-09
---

1
í™ì •ëª¨ë‹˜ì˜ **[ê·¸ë˜í”½ìŠ¤ ìƒˆì‹¹ì½”ìŠ¤](https://honglab.co.kr/)** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.
{: .notice--warning}

<br>


# ğŸ¥ Draw Triangle

![Ect-28](https://github.com/inhopp/inhopp/assets/96368476/b52fd062-3e50-4c0c-b789-e46c0e9deee0){: width="50%" height="60%"}

3D ê·¸ë˜í”½ìŠ¤ì—ì„œ ë³µì¡í•œ ë¬¼ì²´ëŠ” ì‚¼ê°í˜•ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í´ë¦¬ê³¤ ë©”ì‹œ í˜•íƒœë¡œ ë Œë”ë§í•œë‹¤. ë”°ë¼ì„œ ì‚¼ê°í˜•ì„ ê·¸ë¦¬ëŠ” ê²ƒì´ ë Œë”ë§ì˜ ê°€ì¥ ê¸°ë³¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ”ë°, í”½ì…€ì—ì„œ ë‚˜ê°„ Rayê°€ ì‚¼ê°í˜•ê³¼ ì¶©ëŒí•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì–´ë–»ê²Œ íŒë‹¨í•  ìˆ˜ ìˆì„ê¹Œ? ë³µì¡í•´ ë³´ì´ëŠ” 3ì°¨ì› êµ¬ í˜•íƒœëŠ” ë°©ì •ì‹ìœ¼ë¡œ ì‰½ê²Œ íŒë³„í•  ìˆ˜ ìˆì—ˆëŠ”ë° í›¨ì”¬ ê°„ë‹¨í•œ ì‚¼ê°í˜•ì€ ë‹¨ì¼ ë°©ì ì‹ìœ¼ë¡œ í‘œí˜„ì´ ì•ˆë˜ë‹ˆ ì‚´ì§ ì•„ì´ëŸ¬ë‹ˆí•œ ëŠë‚Œì„ ë°›ì•˜ë‹¤.


<br>

## Step 1 - Find Line-Plane Intersection 

![Ect-29](https://github.com/inhopp/inhopp/assets/96368476/fd76b41f-bde8-4366-a93c-e7a7d776db06){: width="70%" height="80%"}

- ë¨¼ì € ì‚¼ê°í˜•ì„ í¬í•¨í•˜ëŠ” í‰ë©´ì˜ normal vectorë¥¼ êµ¬í•œë‹¤.
- normalì„ ì´ìš©í•˜ì—¬ ìœ„ ë°©ì •ì‹ì„ í’€ë©´ t(ê±°ë¦¬)ê°’ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.
- të¥¼ í†µí•´ pë¥¼ ê³„ì‚°


<br>

## Step 2 - Determine inside or outside a triangle

| Inside | Outside |
|:-:|:-:|
|![Ect-30](https://github.com/inhopp/inhopp/assets/96368476/5451ef0f-fb78-4bde-95dd-65f3779883ee)|![Ect-31](https://github.com/inhopp/inhopp/assets/96368476/610f048f-e3b7-43fd-922c-b5c3aa6f6f52)| 

- ì‚¼ê°í˜• ë‚´ë¶€ì— ìˆëŠ” ê²½ìš° sub triangle(?)ì˜ normalë“¤ì´ ëª¨ë‘ í‰ë©´ì˜ normalê³¼ ê°™ì€ ë°©í–¥
- ì‚¼ê°í˜• ì™¸ë¶€ì— ìˆëŠ” ê²½ìš° ì–´ëŠ í•˜ë‚˜ì˜ normalì´ í‰ë©´ì˜ normalê³¼ ë°˜ëŒ€ ë°©í–¥
- ì£¼ì˜) DirectXëŠ” ì™¼ì† ì¢Œí‘œê³„

<br>

``` cpp
// ì‚¼ê°í˜•ì˜ ë’·ë©´ì€ ë Œë”ë§x (ë¬¼ì²´ê°€ í´ë¦¬ê³¤ì¼ ê²½ìš° ì‚¬ìš©)
if (dot(-dir, faceNormal) < 0.0f) return false;

// Rayì™€ í‰ë©´ì´ ìˆ˜í‰ì— ë§¤ìš° ê°€ê¹ë‹¤ë©´ ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨
if (glm::abs(dot(dir, faceNormal)) < 1e-2f) return false;

// ì‚¼ê°í˜•ì´ Rayì˜ ì¶œë°œì  ë’¤ì— ì¡´ì¬í•œë‹¤ë©´ ë Œë”ë§x
if (t < 0.0f) return false;
```


<br>

# ğŸ¥ Result

![results](https://github.com/inhopp/inhopp/assets/96368476/47e85993-f1e6-4cf1-bcc8-6b7a67781ac6){: width="70%" height="80%"}



<br>
<br>


[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}