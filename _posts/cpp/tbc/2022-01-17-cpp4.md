---
title:  "[따배씨++]Chapter4. 변수범위와 더 다양한 변수형" 

categories:
  -  Cpp
tags:
  - [Cpp, Programming, 따배씨++]

toc: true
toc_sticky: true

date: 2022-01-17
last_modified_at: 2022-01-17
---

인프런에 있는 홍정모님의 **[홍정모의 따라하며 배우는 C++](https://www.inflearn.com/course/following-c-plus#)** 강의를 듣고 정리한 내용입니다.<br>
{: .notice--warning}

<br>

# 🚆 지역변수의 범위와 지속기간 - scope vs duration

**scope vs duration : 동적할당 가면 달라짐**

``` cpp
int a = 3;
int a = 5; // error

int apple = 5;
{
  int apple = 10;
  cout << apple << endl; // 10
  cout << ::apple << endl; // 5
}
cout << apple << endl; // 5
```

- 같은 범위 (scope{}) 내에서 동일한 이름의 변수는 사용 불가
- 변수 이름이 같다면, 가장 가까운 범위의 변수가 우선 (name hiding)
- 범위를 벗어나면 변수 데이터는 수명이 다해 사라짐


<br>

``` cpp
namespace work1
{
  int a = 5;
}

namespace work2
{
  int a = 3;
}

cout << work1::a << endl; // 5
cout << work2::a << endl; // 3
```

- namespae를 통해 충돌 방지
- nested namespace 가능



<br>



# 🚆 전역 변수, 정적 변수 & 내부 연결, 외부 연결

## global vs static

**global variable**

``` cpp
int a = 5; // main 밖에서 선언

int main()
{
  ...
}
```

- 다른 cpp파일에서도 값이 바꾸는 경우도 많아서 관리하기가 너무 빡셈 
- 지속기간이 없음. 프로그램 종료 때 사라짐
- `int g_a = 5;` 이런 식으로 g_로 표기해주면 좋음
- **<span style="color:red">사용하려면 const로, 되도록 안 쓰는 게 최고</span>**


<br>

**static variable**

``` cpp
void doSomething()
{
	static int a = 1;
	++a;
	cout << a << endl;
}

int main()
{
	doSomething(); // 2
	doSomething(); // 3
	doSomething(); // 4
	doSomething(); // 5
}
```

- **<span style="color:#bb90e2">os로 부터 받은 메모리가 static(정적) ➡️ 메모리 공유</span>**
- 초기화는 한 번만 시행되는데, 반드시 있어야 함
- 해당 block (범위) 밖에서는 접근 불가
- 함수가 몇 번 호출됐나 등 디버깅할 때 유용함


<br>

## Internal vs External Linkage

**Internal Linkage**

``` cpp
static int g_a = 5;
```

- 다른 cpp파일에서 접근 불가능 (링커에 노출 X)

<br>

**External Linkage**

``` cpp
namespace Constatns // myConstans.h file
{
	extern const double pi = 3.141592;
	extern const double gravity = 9.8;

}

void doSomething(); // extern 생략

int main() 
{
	cout << Constatns::pi << endl;
	doSomething();
}

void doSomething()
{
	cout << 5 << endl;
}
```

- 함수는 extern이 default값 (static 설정도 가능)
- 전방 선언의 의미 : extern이니 어딘가에 몸통이 있다. 컴파일러 너가 알아서 찾아 써라
  - 만약 몸통이 없으면? 빌드는 되는데 컴파일에러남
- 전역 변수 앞에 extern 붙이면 메모리 공유
  - extern 없어도 사용은 가능한데 값 복사해와서 사용 ➡️ extern 명시로 메모리 최적화 가능


<br>
<br>

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}