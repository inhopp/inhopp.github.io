---
title:  "Chapter10. ê°€ìƒ ë©”ëª¨ë¦¬ ê´€ë¦¬(1)" 

categories:
  -  OS
tags:
  - [CS, OS]

toc: true
toc_sticky: true

date: 2022-06-12
last_modified_at: 2022-06-12
---

ìœ íŠœë¸Œì— ìˆëŠ” ê¹€ë•ìˆ˜ êµìˆ˜ë‹˜ì˜ **[Operating System](https://www.youtube.com/watch?v=EdTtGv9w2sA&list=PLBrGAFAIyf5rby7QylRc6JxU5lzQ9c4tN)** ê°•ì˜ë¥¼ ë“£ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.<br>
ì¤‘ê°„ì— ë“±ì¥í•˜ëŠ” ppt ë‚´ìš©ë“¤ì€ ëª¨ë‘ ê°•ì˜ìë£Œë¥¼ ìº¡ì²˜í•œ ê²ƒì…ë‹ˆë‹¤.
{: .notice--warning}

<br>


# ğŸ”§ Virtual Memory

- Virtual memory
  - Non-continuous allocation
  - ì‚¬ìš©ì í”„ë¡œê·¸ë¨ì„ blockìœ¼ë¡œ ë¶„í• í•˜ì—¬ ì ì¬/ì‹¤í–‰
  - Paging/Segmentation system

<br>

- Virtual memory management
  - ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ì„±ëŠ¥ ìµœì í™”
  - Cost model ì •ì˜ â†’ ë‹¤ì–‘í•œ ìµœì í™” ê¸°ë²•



<br>


# ğŸ”§ Cost model for virtual memory system

![10-4](https://user-images.githubusercontent.com/96368476/173223164-13126f07-fe14-4da8-8024-dd9d61d31e2b.png){: width="60%" height="70%" .align-center}

- Page fault rate (ë°œìƒë¥ )
- Page fault frequency (ë°œìƒ ë¹ˆë„)
- **<span style="color:red">Page faultë¥¼ ìµœì†Œí™” í•  ìˆ˜ ìˆë„ë¡ ì „ëµì„ ì„¤ê³„</span>**
  - Context swiching ë° ì»¤ë„ ê°œì… ìµœì†Œí™”





<br>


# ğŸ”§ HW Components

## Address translation device (ì£¼ì†Œ ì‚¬ìƒ ì¥ì¹˜)

- TLB, page table register, cache memory, ...

<br>

# Bit vetroes

| Bit veotrs | Reference bit ì´ˆê¸°í™” |
|:-:|:-:|
| ![10-1](https://user-images.githubusercontent.com/96368476/173223167-cbddc998-848b-4379-ac97-39a038e8203a.png) | ![10-2](https://user-images.githubusercontent.com/96368476/173223168-bb59d94c-b907-42cc-9137-129a8196f4cf.png) |

- Reference bits (ì°¸ì¡° ë¹„íŠ¸)
  - ë©”ëª¨ë¦¬ì— ì ì¬ëœ ê°ê°ì˜ pageê°€ ìµœê·¼ì— ì°¸ì¡°ë˜ì—ˆëŠ”ì§€ í‘œì‹œ
  - í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì°¸ì¡°ë˜ë©´ reference bit 1ë¡œ ì„¤ì •
  - ì£¼ê¸°ì ìœ¼ë¡œ ëª¨ë“  reference bit 0ìœ¼ë¡œ ì´ˆê¸°í™”
  - **ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ëŠëƒê°€ ì „ëµ**
- Update bits (ê°±ì‹  ë¹„íŠ¸)
  - dirty bits ë¼ê³ ë„ í•¨
  - pageê°€ ë©”ëª¨ë¦¬ì— ì ì¬ëœ í›„, í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ìˆ˜ì •ë˜ì—ˆëŠ”ì§€ í‘œì‹œ
  - ìˆ˜ì •ë˜ì—ˆë‹¤ë©´ memory ë‚´ì˜ ë°ì´í„° != swap device ë‚´ì˜ ë°ì´í„°
  - **í•´ë‹¹ pageì— ëŒ€í•œ write-back í•„ìš”**




<br>


# ğŸ”§ SW Components

**ê°€ìƒ ë©”ëª¨ë¦¬ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ê´€ë¦¬ ê¸°ë²•ë“¤**
- Allocation strategies (í• ë‹¹ ê¸°ë²•)
- Fetch strategies
- Placement strategies (ë°°ì¹˜ ê¸°ë²•)
- Replacement strategies (êµì²´ ê¸°ë²•)
- Cleaning strategies (ì •ë¦¬ ê¸°ë²•)
- Load control strategies (ë¶€í•˜ ì¡°ì ˆ ê¸°ë²•)



<br>


## Allocation strategies (í• ë‹¹ ê¸°ë²•)

**ê° í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì–¼ë§ˆë§Œí¼ì˜ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•  ê²ƒì¸ê°€?**
- Fixed allocation (ê³ ì • í• ë‹¹)
  - í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ ë™ì•ˆ ê³ ì •ëœ í¬ê¸°ì˜ ë©”ëª¨ë¦¬ë§Œ í• ë‹¹
- Variable allocation (ê°€ë³€ í• ë‹¹)
  - í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ë™ì•ˆ ìœ ë™ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ í• ë‹¹

<br>

- í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ ì–‘ì„ ì˜ˆì¸¡í•´ì•¼í•¨
- ë„ˆë¬´ í° ë©”ëª¨ë¦¬ í• ë‹¹í•˜ë©´ ë©”ëª¨ë¦¬ ë‚­ë¹„
- ë„ˆë¬´ ì‘ì€ ë©”ëª¨ë¦¬ í• ë‹¹í•˜ë©´ page fault ì¦ê°€


<br>


## Fetch strategies

**íŠ¹ì • pageë¥¼ ì–¸ì œ ë©”ëª¨ë¦¬ì— ì ì¬í•  ê²ƒì¸ê°€?**
- Demand fetch (demand paging)
  - í”„ë¡œì„¸ìŠ¤ê°€ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€ë“¤ë§Œ ì ì¬
  - page fault overhead
- Anticipatory fetch (pre-paging)
  - ì°¸ì¡°ë  ê°€ëŠ¥ì„±ì´ ë†’ì€ pageë¥¼ ì˜ˆì¸¡í•˜ê³  ë¯¸ë¦¬ ì ì¬
  - ì˜ˆì¸¡ ì„±ê³µ ì‹œ page fault overhead ì—†ìŒ
  - ì˜ˆì¸¡ ì‹¤íŒ¨ ì‹œ ìì› ë‚­ë¹„ê°€ í¼
- ì‹¤ì œ ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ demand fetch ê¸°ë²• ì‚¬ìš©



<br>


## Placement strategies (ë°°ì¹˜ ê¸°ë²•)

**Page/Segmentationë¥¼ ì–´ë””ì— ì ì¬í•  ê²ƒì¸ê°€?**
- Paging systemì—ëŠ” ë¶ˆí•„ìš”
  - í¬ê¸°ê°€ ì „ë¶€ ê°™ì•„ì„œ ì „ëµì´ í•„ìš” ì—†ìŒ
- Segmentation systemì—ì„œì˜ ë°°ì¹˜ ê¸°ë²•
  - First-fit
  - Best-fit
  - Worst-fit
  - Next-fit


<br>


## Replacement strategies (êµì²´ ê¸°ë²•)

> ë”°ë¡œ ë¹¼ì„œ ì •ë¦¬

**ë¹ˆ page frameì´ ì—†ëŠ” ê²½ìš° ìƒˆë¡œìš´ pageë¥¼ ì–´ë–¤ pageì™€ êµì²´í•  ê²ƒì¸ê°€?**
- Fixed allocationì„ ìœ„í•œ êµì²´ ê¸°ë²•
  - MIN algorithm
  - Random algorithm
  - FIFO algorithm
  - LRU(Least Recently Used) algorithm
  - LFU(Least Frequently Used) algorithm
  - NUR(Not Used Recently) algorithm
  - Clock algorithm
  - Second chance algorithm
- Variable allocationì„ ìœ„í•œ êµì²´ ê¸°ë²•
  - VMIN(Variable MIN) algorithm
  - WS(Working Set) algorithm
  - PFF(Page Fault Frequency) algorithm



<br>


## Cleaning strategies (ì •ë¦¬ ê¸°ë²•)

**ë³€ê²½ëœ pageë¥¼ ì–¸ì œ write-backí•  ê²ƒì¸ê°€? (swap deviceì— ë°˜ì˜)**
- Demand cleaning
  - í•´ë‹¹ pageì— ë©”ëª¨ë¦¬ì—ì„œ ë‚´ë ¤ì˜¬ ë•Œ write-back
- Anticipatory cleaning (pre-cleaning)
  - ë” ì´ìƒ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ì—†ë‹¤ê³  íŒë‹¨í•  ë•Œ ë¯¸ë¦¬ write-back
  - Page êµì²´ ì‹œ ë°œìƒí•˜ëŠ” write-back ì‹œê°„ ì ˆì•½
  - Write-back ì´í›„, page ë‚´ìš©ì´ ìˆ˜ì •ë˜ë©´ overhead
- ì‹¤ì œ ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ demand cleaning ê¸°ë²• ì‚¬ìš©


<br>


## Load control strategies (ë¶€í•˜ ì¡°ì ˆ ê¸°ë²•)

![10-3](https://user-images.githubusercontent.com/96368476/173230231-c7360174-ec79-488d-a2e8-ab5858c7d884.png){: width="60%" height="70%" .align-center}

**ì‹œìŠ¤í…œì˜ multi-programming degree ì¡°ì ˆ**
- Allocation strategiesì™€ ì—°ê³„ë¨
- ì €ë¶€í•˜ ìƒíƒœ (Inder-loaded)
  - ì‹œìŠ¤í…œ ìì› ë‚­ë¹„, ì„±ëŠ¥ ì €í•˜
- ê³ ë¶€í•˜ ìƒíƒœ (Over-loaded)
  - ìì›ì— ëŒ€í•œ ê²½ìŸ ì‹¬í™”, ì„±ëŠ¥ ì €í•˜
  - Thrashing(ìŠ¤ë ˆì‹±) í˜„ìƒ ë°œìƒ
    - ê³¼ë„í•œ page faultê°€ ë°œìƒí•˜ëŠ” í˜„ìƒ



<br>


# ğŸ”§ Replacement strategies (êµì²´ ê¸°ë²•)

## Locality

![10-5](https://user-images.githubusercontent.com/96368476/173231355-66bdbf0b-5b88-4f62-a830-ccb6af0c3faf.png){: width="60%" height="70%" .align-center}

- í”„ë¡œì„¸ìŠ¤ê°€ í”„ë¡œê·¸ë¨/ë°ì´í„°ì˜ íŠ¹ì • ì˜ì—­ì„ ì§‘ì¤‘ì ìœ¼ë¡œ ì°¸ì¡°í•˜ëŠ” í˜„ìƒ
  - Loop structure
  - Array structure
  - ë“±ë“±...
- ì˜ˆì‹œì˜ ê²½ìš° 4,7,8,6  4ê°œì˜ pageë§Œì„ ì§‘ì¤‘ì ìœ¼ë¡œ ì ‘ê·¼



<br>

## Fixed allocation

### MIN algorithm (OPT algorithm)

| Replacement | Example |
|:-:|:-:|
| ![10-6](https://user-images.githubusercontent.com/96368476/173231357-06088b6a-415b-4d68-a76f-c56360d53f0e.png) | ![10-7](https://user-images.githubusercontent.com/96368476/173231358-97c74955-2c49-472d-8008-0454ecc8b38e.png) |

- ì•ìœ¼ë¡œ ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì°¸ì¡°ë˜ì§€ ì•Šì„ page êµì²´
- Minimize page fault frequency (Optimal solution)
  - Proved
- ì‹¤í˜„ ë¶ˆê°€ëŠ¥ (Inrealizable)
  - Page reference stringì„ ë¯¸ë¦¬ ì•Œê³  ìˆì–´ì•¼ í•¨
- **êµì²´ ê¸°ë²•ì˜ ì„±ëŠ¥ í‰ê°€ ë„êµ¬ë¡œ ì‚¬ìš©ë¨**


<br>


### Random algorithm

- ë¬´ì‘ìœ„ë¡œ êµì²´í•  page ì„ íƒ
- Low overhead
- No policy


<br>


### FIFO algorithm

| Replacement | Example |
|:-:|:-:|
| ![10-8](https://user-images.githubusercontent.com/96368476/173231360-c04b9967-9fb9-4b78-b9f3-06bd849ce1cb.png) | ![10-9](https://user-images.githubusercontent.com/96368476/173231361-1cc330a8-6a22-4c09-889f-d5e47bc77bdc.png) |

- First In First Out : ê°€ì¥ ì˜¤ë˜ëœ pageë¥¼ êµì²´
- Pageê°€ ì ì¬ëœ ì‹œê°„ì„ ê¸°ì–µí•˜ê³  ìˆì–´ì•¼í•¨
- ìì£¼ ì‚¬ìš©ë˜ëŠ” pageê°€ êµì²´ë  ê°€ëŠ¥ì„±ì´ í¼
  - Localityì— ëŒ€í•œ ê³ ë ¤ê°€ ì—†ìŒ
- FIFO anomaly
  - ë” ë§ì€ page frameì„ í• ë‹¹ ë°›ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  page faultì˜ ìˆ˜ê°€ ì¦ê°€í•˜ëŠ” ê²½ìš°ê°€ ìˆìŒ


<br>


### LRU (Least Recently Used) algorithm

| Replacement | Example |
|:-:|:-:|
| ![10-10](https://user-images.githubusercontent.com/96368476/173232170-49e47acf-1c73-4483-b5e7-81f26ea107f1.png) | ![10-11](https://user-images.githubusercontent.com/96368476/173232171-4842df72-2413-4b01-920c-9c9f73b43601.png) |

- ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì°¸ì¡°ë˜ì§€ ì•Šì€ pageë¥¼ êµì²´
- Page ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ì‹œê°„ì„ ê¸°ë¡í•´ì•¼ í•¨
- Localityì— ê¸°ë°˜ì„ ë‘” êµì²´ ê¸°ë²•
- MIN algorithmì— ê·¼ì ‘í•œ ì„±ëŠ¥ì„ ë³´ì—¬ì¤Œ
- **<span style="color:red">ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ í™œìš©ë˜ëŠ” ê¸°ë²•</span>**
- ë‹¨ì 
  - ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ì‹œê°„ ê¸°ë¡ (overhead)
    - ì •í™•í•œ ì‹œê°„ ëŒ€ì‹  ìˆœì„œë§Œ ê¸°ë¡í•˜ëŠ” ë“± ê°„ì†Œí™” ê°€ëŠ¥
  - Loop ì‹¤í–‰ì— í•„ìš”í•œ í¬ê¸°ë³´ë‹¤ ì‘ì€ ìˆ˜ì˜ page frameì´ í• ë‹¹ ëœ ê²½ìš°, page fault ìˆ˜ê°€ ê¸‰ê²©íˆ ì¦ê°€
    - Allocation ê¸°ë²•ìœ¼ë¡œ í•´ê²°í•´ì•¼ í•¨



<br>


### LFU (Least Frequently Used) algorithm

| Replacement | Example |
|:-:|:-:|
| ![10-12](https://user-images.githubusercontent.com/96368476/173232172-c50d3f43-28fe-43e4-b6c2-f159c061e6ae.png) | ![10-13](https://user-images.githubusercontent.com/96368476/173232173-45c72433-a4ed-4d28-8244-afcadad542e3.png) |

- ì°¸ì¡° íšŸìˆ˜ê°€ ê°€ì¥ ì ì€  pageë¥¼ êµì²´
- Page ì°¸ì¡°í•  ë•Œë§ˆë‹¤ ì°¸ì¡° íšŸìˆ˜ë¥¼ ëˆ„ì ì‹œì¼œì•¼ í•¨
  - LRU ëŒ€ë¹„ ì ì€ overhead
- ë‹¨ì  : ìµœê·¼ ì ì¬ëœ ì°¸ì¡°ë  ê°€ëŠ¥ì„±ì´ ë†’ì€ pageê°€ êµì²´ë  ìˆ˜ ìˆìŒ



<br>


### NUR (Not Used Recently) algorithm

![10-14](https://user-images.githubusercontent.com/96368476/173232174-090cd3db-b094-4da3-a1f0-b9b9bee08eaa.png){: width="60%" height="70%" .align-center}

- LRUì™€ ë¹„ìŠ·
  - ì‹œê°„ì´ ì•„ë‹Œ ì°¸ì¡° ì—¬ë¶€ë§Œ ë‹¤ì§
  - LRUë³´ë‹¤ ì ì€ overhead & ë¹„ìŠ·í•œ ì„±ëŠ¥
- **Bit vector ì‚¬ìš©í•˜ë©´ í¸í•¨!**



<br>


### Clock algorithm

| Replacement | Example |
|:-:|:-:|
| ![10-12](https://user-images.githubusercontent.com/96368476/173232172-c50d3f43-28fe-43e4-b6c2-f159c061e6ae.png) | ![10-13](https://user-images.githubusercontent.com/96368476/173232173-45c72433-a4ed-4d28-8244-afcadad542e3.png) |






<br>




[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}